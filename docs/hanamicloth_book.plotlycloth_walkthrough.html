<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Hanamicloth â€“ 4&nbsp; Plotlycloth Walkthrough ðŸ‘£ - experimental ðŸ› </title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./hanamicloth_book.walkthrough.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./hanamicloth_book.plotlycloth_walkthrough.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Plotlycloth Walkthrough ðŸ‘£ - experimental ðŸ› </span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Hanamicloth</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hanamicloth_book.datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Some datasets</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hanamicloth_book.walkthrough.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Walkthrough ðŸ‘£</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hanamicloth_book.plotlycloth_walkthrough.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Plotlycloth Walkthrough ðŸ‘£ - experimental ðŸ› </span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#known-issues" id="toc-known-issues" class="nav-link active" data-scroll-target="#known-issues"><span class="header-section-number">4.1</span> Known issues</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup"><span class="header-section-number">4.2</span> Setup</a></li>
  <li><a href="#basic-usage" id="toc-basic-usage" class="nav-link" data-scroll-target="#basic-usage"><span class="header-section-number">4.3</span> Basic usage</a></li>
  <li><a href="#templates-and-parameters" id="toc-templates-and-parameters" class="nav-link" data-scroll-target="#templates-and-parameters"><span class="header-section-number">4.4</span> Templates and parameters</a></li>
  <li><a href="#realizing-the-plot" id="toc-realizing-the-plot" class="nav-link" data-scroll-target="#realizing-the-plot"><span class="header-section-number">4.5</span> Realizing the plot</a></li>
  <li><a href="#field-type-inference" id="toc-field-type-inference" class="nav-link" data-scroll-target="#field-type-inference"><span class="header-section-number">4.6</span> Field type inference</a></li>
  <li><a href="#more-examples" id="toc-more-examples" class="nav-link" data-scroll-target="#more-examples"><span class="header-section-number">4.7</span> More examples</a>
  <ul>
  <li><a href="#boxplot" id="toc-boxplot" class="nav-link" data-scroll-target="#boxplot"><span class="header-section-number">4.7.1</span> Boxplot</a></li>
  <li><a href="#bar-chart" id="toc-bar-chart" class="nav-link" data-scroll-target="#bar-chart"><span class="header-section-number">4.7.2</span> Bar chart</a></li>
  <li><a href="#segment-plot" id="toc-segment-plot" class="nav-link" data-scroll-target="#segment-plot"><span class="header-section-number">4.7.3</span> Segment plot</a></li>
  </ul></li>
  <li><a href="#varying-color-and-size" id="toc-varying-color-and-size" class="nav-link" data-scroll-target="#varying-color-and-size"><span class="header-section-number">4.8</span> Varying color and size</a></li>
  <li><a href="#time-series" id="toc-time-series" class="nav-link" data-scroll-target="#time-series"><span class="header-section-number">4.9</span> Time series</a></li>
  <li><a href="#multiple-layers" id="toc-multiple-layers" class="nav-link" data-scroll-target="#multiple-layers"><span class="header-section-number">4.10</span> Multiple layers</a></li>
  <li><a href="#updating-data" id="toc-updating-data" class="nav-link" data-scroll-target="#updating-data"><span class="header-section-number">4.11</span> Updating data</a></li>
  <li><a href="#smoothing" id="toc-smoothing" class="nav-link" data-scroll-target="#smoothing"><span class="header-section-number">4.12</span> Smoothing</a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping"><span class="header-section-number">4.13</span> Grouping</a></li>
  <li><a href="#example-out-of-sample-predictions" id="toc-example-out-of-sample-predictions" class="nav-link" data-scroll-target="#example-out-of-sample-predictions"><span class="header-section-number">4.14</span> Example: out-of-sample predictions</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms"><span class="header-section-number">4.15</span> Histograms</a></li>
  <li><a href="#debugging-wip" id="toc-debugging-wip" class="nav-link" data-scroll-target="#debugging-wip"><span class="header-section-number">4.16</span> Debugging (WIP)</a>
  <ul>
  <li><a href="#coordinates-wip" id="toc-coordinates-wip" class="nav-link" data-scroll-target="#coordinates-wip"><span class="header-section-number">4.16.1</span> Coordinates (WIP)</a>
  <ul class="collapse">
  <li><a href="#geo" id="toc-geo" class="nav-link" data-scroll-target="#geo"><span class="header-section-number">4.16.1.1</span> geo</a></li>
  <li><a href="#polar" id="toc-polar" class="nav-link" data-scroll-target="#polar"><span class="header-section-number">4.16.1.2</span> polar</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#coming-soon" id="toc-coming-soon" class="nav-link" data-scroll-target="#coming-soon"><span class="header-section-number">4.17</span> Coming soon</a>
  <ul>
  <li><a href="#facets" id="toc-facets" class="nav-link" data-scroll-target="#facets"><span class="header-section-number">4.17.1</span> Facets</a></li>
  <li><a href="#scales" id="toc-scales" class="nav-link" data-scroll-target="#scales"><span class="header-section-number">4.17.2</span> Scales</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Plotlycloth Walkthrough ðŸ‘£ - experimental ðŸ› </span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
.clay-side-by-side .sourceCode {margin: 0}
.clay-side-by-side {margin: 1em 0}
</style>
<script src="hanamicloth_book.plotlycloth_walkthrough_files/md-default0.js" type="text/javascript"></script>
<script src="hanamicloth_book.plotlycloth_walkthrough_files/md-default1.js" type="text/javascript"></script>
<script src="hanamicloth_book.plotlycloth_walkthrough_files/plotly2.js" type="text/javascript"></script>
<script src="hanamicloth_book.plotlycloth_walkthrough_files/cytoscape3.js" type="text/javascript"></script>
<p>Plotlycloth is a Clojure API for creating <a href="https://plotly.com/javascript/">Plotly.js</a> plots through layered pipelines. It is part of the Hanamicloth library.</p>
<p>Here, we provide a walkthrough of the API.</p>
<p>ðŸ›  This part of Hanamicloth is still in experimental stage. Some of the details will change soon. Feedback and comments will help.</p>
<p>Soon, we will provide more in-depth explanations in additional chapters.</p>
<section id="known-issues" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="known-issues"><span class="header-section-number">4.1</span> Known issues</h2>
<ul>
<li><p>Plot legends are missing in some cases.</p></li>
<li><p>Breaking changes are expected.</p></li>
</ul>
</section>
<section id="setup" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="setup"><span class="header-section-number">4.2</span> Setup</h2>
<p>For this tutorial, we require:</p>
<ul>
<li><p>The plotlycloth API namepace</p></li>
<li><p><a href="https://scicloj.github.io/tablecloth/">Tablecloth</a> for dataset processing</p></li>
<li><p>the <a href="https://cnuernber.github.io/dtype-next/tech.v3.datatype.datetime.html">datetime namespace</a> of <a href="https://github.com/cnuernber/dtype-next">dtype-next</a></p></li>
<li><p>the <a href="https://techascent.github.io/tech.ml.dataset/tech.v3.dataset.print.html">print namespace</a> of <a href="https://github.com/techascent/tech.ml.dataset">tech.ml.dataset</a> for customized dataset printing</p></li>
<li><p><a href="https://scicloj.github.io/kindly-noted/">Kindly</a> (to specify how certaiun values should be visualized)</p></li>
<li><p>the datasets defined in the <a href="./hanamicloth.datasets.html">Datasets chapter</a></p></li>
</ul>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> hanamicloth-book.plotlycloth-walkthrough</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [scicloj.hanamicloth.v1.plotlycloth <span class="at">:as</span> ploclo]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [tablecloth.api <span class="at">:as</span> tc]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [tablecloth.column.api <span class="at">:as</span> tcc]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [tech.v3.datatype.datetime <span class="at">:as</span> datetime]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            [tech.v3.dataset.<span class="kw">print</span> <span class="at">:as</span> <span class="kw">print</span>]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            [clojure.string <span class="at">:as</span> <span class="kw">str</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.api <span class="at">:as</span> kindly]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            [hanamicloth-book.datasets <span class="at">:as</span> datasets]</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            [aerial.hanami.templates <span class="at">:as</span> ht]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-usage" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="basic-usage"><span class="header-section-number">4.3</span> Basic usage</h2>
<p>Plotlycloth plots are created by passing datasets to a pipeline of layer functions.</p>
<p>Additional parameters to the functions are passed as maps. Plotlycloth map keys begin with <code>=</code> (e.g., <code>:=color</code>).</p>
<p>For example, let us plot a scatterplot (a layer of points) of 10 random items from the Iris dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:sepal-width</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:sepal-length</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:species</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.6</span>})</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    ploclo/plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"y":[5.0,4.6,4.5],"name":"setosa","marker":{"color":"#1B9E77","size":20},"mode":"markers","type":"scatter","opacity":0.6,"x":[3.4,3.4,2.3]},{"y":[5.7,6.1,5.6,5.0,6.3],"name":"versicolor","marker":{"color":"#D95F02","size":20},"mode":"markers","type":"scatter","opacity":0.6,"x":[2.9,3.0,2.7,2.0,2.5]},{"y":[6.2,6.7],"name":"virginica","marker":{"color":"#7570B3","size":20},"mode":"markers","type":"scatter","opacity":0.6,"x":[2.8,3.3]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":null}, {});</script></div>
</section>
<section id="templates-and-parameters" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="templates-and-parameters"><span class="header-section-number">4.4</span> Templates and parameters</h2>
<p>(ðŸ’¡ You do neet need to understand these details for basic usage.)</p>
<p>Technically, the parameter maps contain <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#templates-substitution-keys-and-transformations">Hanami substitution keys</a>, which means they are processed by a <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#basic-transformation-rules">simple set of rules</a>, but you do not need to understand what this means yet.</p>
<p>The layer functions return a Hanami template. Let us print the resulting structure of the previous plot.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> example1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>      (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      (ploclo/layer-point</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>       {:=x <span class="at">:sepal-width</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        :=y <span class="at">:sepal-length</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        :=color <span class="at">:species</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        :=mark-size <span class="dv">20</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        :=mark-opacity <span class="fl">0.6</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(kind/pprint example1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:data</span> :=traces,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:layout</span> :=layout,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a> <span class="at">:aerial.hanami.templates/defaults</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a> {:=x0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  :=y-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  :=coordinates <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  :=x0-after-stat :=x0,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  :=layers</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  [{<span class="at">:y</span> :=y-after-stat,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">:trace-base</span> {<span class="at">:mode</span> :=mode, <span class="at">:type</span> :=type, <span class="at">:opacity</span> :=mark-opacity},</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">:color-type</span> :=color-type,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">:r</span> :=r,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">:coordinates</span> :=coordinates,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">:group</span> :=group,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">:color</span> :=color,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">:mark</span> :=mark,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x-title</span> :=x-title,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">:name</span> :=name,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y1</span> :=y1-after-stat,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">:theta</span> :=theta,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">:size</span> :=size,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">:size-type</span> :=size-type,</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">:aerial.hanami.templates/defaults</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    {:=x0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>     :=y-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>     :=coordinates <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>     :=x0-after-stat :=x0,</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>     :=layers [],</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>     :=x1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>     :=title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>     :=y1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>     :=y-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>     :=height <span class="dv">400</span>,</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>     :=name <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>     :=mark-opacity <span class="fl">0.6</span>,</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>     :=inferred-group #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>     :=mode #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>     :=y-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>     :=size <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>     :=group :=inferred-group,</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>     :=y0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>     :=mark-size <span class="dv">20</span>,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>     :=size-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>     :=r <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>     :=color <span class="at">:species</span>,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>     :=mark-color <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>     :=y1-after-stat :=y1,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>     :=x <span class="at">:sepal-width</span>,</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>     :=x-after-stat :=x,</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>     :=yaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>     :=type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>     :=x-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>     :=traces #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>     :=x-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>     :=histogram-nbins <span class="dv">10</span>,</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>     :=stat <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>     :=width <span class="dv">500</span>,</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>     :=color-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>     :=xaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>     :=mark <span class="at">:point</span>,</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>     :=dataset-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>     :=x-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>     :=layout #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>     :=y <span class="at">:sepal-length</span>,</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>     :=x1-after-stat :=x1,</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>     :=dataset #&lt;WrappedValue<span class="at">@53adaa91:</span> datasets/iris [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span>,</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>     :=background <span class="st">"rgb(235,235,235)"</span>,</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>     :=theta <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>     :=y0-after-stat :=y0,</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>     :=y-after-stat :=y,</span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>     :=predictors [:=x],</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>     :=marker-size-key #function[clojure.lang.AFunction/<span class="dv">1</span>]},</span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y0</span> :=y0-after-stat,</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">:inferred-group</span> :=inferred-group,</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">:marker-override</span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:color</span> :=mark-color, :=marker-size-key :=mark-size},</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x</span> :=x-after-stat,</span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x1</span> :=x1-after-stat,</span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x0</span> :=x0-after-stat,</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y-title</span> :=y-title,</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">:dataset</span> :=dataset-after-stat}],</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>  :=x1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>  :=title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>  :=y1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>  :=y-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>  :=height <span class="dv">400</span>,</span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>  :=name <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>  :=mark-opacity <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>  :=inferred-group #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>  :=mode #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>  :=y-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>  :=size <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>  :=group :=inferred-group,</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>  :=y0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>  :=mark-size <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>  :=size-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a>  :=r <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>  :=color <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>  :=mark-color <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a>  :=y1-after-stat :=y1,</span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>  :=x <span class="at">:x</span>,</span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a>  :=x-after-stat :=x,</span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>  :=yaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>  :=type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>  :=x-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a>  :=traces #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>  :=x-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>  :=histogram-nbins <span class="dv">10</span>,</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>  :=stat <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>  :=width <span class="dv">500</span>,</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>  :=color-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a>  :=xaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a>  :=mark <span class="at">:point</span>,</span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>  :=dataset-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>  :=x-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a>  :=layout #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>  :=y <span class="at">:y</span>,</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>  :=x1-after-stat :=x1,</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a>  :=dataset #&lt;WrappedValue<span class="at">@53adaa91:</span> datasets/iris [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span>,</span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>  :=background <span class="st">"rgb(235,235,235)"</span>,</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>  :=theta <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a>  :=y0-after-stat :=y0,</span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a>  :=y-after-stat :=y,</span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a>  :=predictors [:=x],</span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a>  :=marker-size-key #function[clojure.lang.AFunction/<span class="dv">1</span>]},</span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a> <span class="at">:kindly/f</span> <span class="va">#'scicloj.hanamicloth.v1.plotlycloth/plotly-xform</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This template has all the necessary knowledge, including the substitution keys, to turn into a plot. This happens when your visual tool (e.g., Clay) displays the plot. The tool knows what to do thanks to the Kindly metadata and a special function attached to the plot.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">meta</span> example1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>#<span class="at">:kindly</span>{<span class="at">:kind</span> <span class="at">:kind/fn</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:kindly/f</span> example1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="va">#'scicloj.hanamicloth.v1.plotlycloth/plotly-xform</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="realizing-the-plot" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="realizing-the-plot"><span class="header-section-number">4.5</span> Realizing the plot</h2>
<p>If you wish to see the resulting plot specification before displaying it as a plot, you can use the <code>plot</code> function. In this case, it generates a Plotly.js plot:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    ploclo/plot</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a> [{<span class="at">:y</span> [<span class="fl">5.0</span> <span class="fl">4.6</span> <span class="fl">4.5</span>],</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"setosa"</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#1B9E77"</span>, <span class="at">:size</span> <span class="dv">20</span>},</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>   <span class="at">:opacity</span> <span class="fl">0.6</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.3</span>]}</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:y</span> [<span class="fl">5.7</span> <span class="fl">6.1</span> <span class="fl">5.6</span> <span class="fl">5.0</span> <span class="fl">6.3</span>],</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"versicolor"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#D95F02"</span>, <span class="at">:size</span> <span class="dv">20</span>},</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>   <span class="at">:opacity</span> <span class="fl">0.6</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">2.9</span> <span class="fl">3.0</span> <span class="fl">2.7</span> <span class="fl">2.0</span> <span class="fl">2.5</span>]}</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:y</span> [<span class="fl">6.2</span> <span class="fl">6.7</span>],</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"virginica"</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#7570B3"</span>, <span class="at">:size</span> <span class="dv">20</span>},</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>   <span class="at">:opacity</span> <span class="fl">0.6</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">2.8</span> <span class="fl">3.3</span>]}],</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a> <span class="at">:layout</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a> {<span class="at">:width</span> <span class="dv">500</span>,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:height</span> <span class="dv">400</span>,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:plot</span>_bgcolor <span class="st">"rgb(235,235,235)"</span>,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">:xaxis</span> {<span class="at">:gridcolor</span> <span class="st">"rgb(255,255,255)"</span>, <span class="at">:title</span> <span class="at">:sepal-width</span>},</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">:yaxis</span> {<span class="at">:gridcolor</span> <span class="st">"rgb(255,255,255)"</span>, <span class="at">:title</span> <span class="at">:sepal-length</span>},</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">:title</span> <span class="va">nil</span>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is annotated as <code>kind/plotly</code>, so that visual tools know how to render it.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    ploclo/plot</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">meta</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>#<span class="at">:kindly</span>{<span class="at">:kind</span> <span class="at">:kind/plotly</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This can be useful if you wish to process the Actual Plotly.js spec rather than use Plotlyclothâ€™s API. Let us change the background colour, for example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    ploclo/plot</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:layout</span> <span class="at">:plot</span>_bgcolor] <span class="st">"#eeeedd"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"y":[5.0,4.6,4.5],"name":"setosa","marker":{"color":"#1B9E77","size":20},"mode":"markers","type":"scatter","opacity":0.6,"x":[3.4,3.4,2.3]},{"y":[5.7,6.1,5.6,5.0,6.3],"name":"versicolor","marker":{"color":"#D95F02","size":20},"mode":"markers","type":"scatter","opacity":0.6,"x":[2.9,3.0,2.7,2.0,2.5]},{"y":[6.2,6.7],"name":"virginica","marker":{"color":"#7570B3","size":20},"mode":"markers","type":"scatter","opacity":0.6,"x":[2.8,3.3]}], {"width":500,"height":400,"plot_bgcolor":"#eeeedd","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":null}, {});</script></div>
</section>
<section id="field-type-inference" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="field-type-inference"><span class="header-section-number">4.6</span> Field type inference</h2>
<p>Plotlycloth infers the type of relevant fields from the data.</p>
<p>The example above was colored as it were since <code>:species</code> column was nominal, so it was assigned distinct colours.</p>
<p>In the following example, the coloring is by a quantitative column, so a color gradient is used:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/mtcars</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:mpg</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:cyl</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"","x":[21.0,21.0,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26.0,30.4,15.8,19.7,15.0,21.4],"y":[160.0,160.0,108.0,258.0,360.0,225.0,360.0,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472.0,460.0,440.0,78.7,75.7,71.1,120.1,318.0,304.0,350.0,400.0,79.0,120.3,95.1,351.0,145.0,301.0,121.0],"marker":{"color":[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],"size":20}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"mpg"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp"},"title":null}, {});</script></div>
<p>We can override the inferred types and thus affect the generated plot:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/mtcars</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:mpg</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:cyl</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>      :=color-type <span class="at">:nominal</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"6","x":[21.0,21.0,21.4,18.1,19.2,17.8,19.7],"y":[160.0,160.0,258.0,225.0,167.6,167.6,145.0],"marker":{"color":"#1B9E77","size":20}},{"mode":"markers","type":"scatter","name":"4","x":[22.8,24.4,22.8,32.4,30.4,33.9,21.5,27.3,26.0,30.4,21.4],"y":[108.0,146.7,140.8,78.7,75.7,71.1,120.1,79.0,120.3,95.1,121.0],"marker":{"color":"#D95F02","size":20}},{"mode":"markers","type":"scatter","name":"8","x":[18.7,14.3,16.4,17.3,15.2,10.4,10.4,14.7,15.5,15.2,13.3,19.2,15.8,15.0],"y":[360.0,360.0,275.8,275.8,275.8,472.0,460.0,440.0,318.0,304.0,350.0,400.0,351.0,301.0],"marker":{"color":"#7570B3","size":20}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"mpg"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp"},"title":null}, {});</script></div>
</section>
<section id="more-examples" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="more-examples"><span class="header-section-number">4.7</span> More examples</h2>
<section id="boxplot" class="level3" data-number="4.7.1">
<h3 data-number="4.7.1" class="anchored" data-anchor-id="boxplot"><span class="header-section-number">4.7.1</span> Boxplot</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/mtcars</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-boxplot</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:cyl</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":null,"type":"box","name":"","x":[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],"y":[160.0,160.0,108.0,258.0,360.0,225.0,360.0,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472.0,460.0,440.0,78.7,75.7,71.1,120.1,318.0,304.0,350.0,400.0,79.0,120.3,95.1,351.0,145.0,301.0,121.0]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"cyl"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp"},"title":null}, {});</script></div>
</section>
<section id="bar-chart" class="level3" data-number="4.7.2">
<h3 data-number="4.7.2" class="anchored" data-anchor-id="bar-chart"><span class="header-section-number">4.7.2</span> Bar chart</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/mtcars</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    (tc/group-by [<span class="at">:cyl</span>])</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    (tc/aggregate {<span class="at">:total-disp</span> #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:disp</span> tcc/sum)})</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-bar</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:cyl</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:total-disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":null,"type":"bar","name":"","x":[6,4,8],"y":[1283.2,1156.5,4943.4]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"cyl"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"total-disp"},"title":null}, {});</script></div>
</section>
<section id="segment-plot" class="level3" data-number="4.7.3">
<h3 data-number="4.7.3" class="anchored" data-anchor-id="segment-plot"><span class="header-section-number">4.7.3</span> Segment plot</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-segment</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>     {:=x0 <span class="at">:sepal-width</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>      :=y0 <span class="at">:sepal-length</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>      :=x1 <span class="at">:petal-width</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>      :=y1 <span class="at">:petal-length</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.4</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">3</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:species</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"y":[5.1,1.4,null,4.9,1.4,null,4.7,1.3,null,4.6,1.5,null,5.0,1.4,null,5.4,1.7,null,4.6,1.4,null,5.0,1.5,null,4.4,1.4,null,4.9,1.5,null,5.4,1.5,null,4.8,1.6,null,4.8,1.4,null,4.3,1.1,null,5.8,1.2,null,5.7,1.5,null,5.4,1.3,null,5.1,1.4,null,5.7,1.7,null,5.1,1.5,null,5.4,1.7,null,5.1,1.5,null,4.6,1.0,null,5.1,1.7,null,4.8,1.9,null,5.0,1.6,null,5.0,1.6,null,5.2,1.5,null,5.2,1.4,null,4.7,1.6,null,4.8,1.6,null,5.4,1.5,null,5.2,1.5,null,5.5,1.4,null,4.9,1.5,null,5.0,1.2,null,5.5,1.3,null,4.9,1.4,null,4.4,1.3,null,5.1,1.5,null,5.0,1.3,null,4.5,1.3,null,4.4,1.3,null,5.0,1.6,null,5.1,1.9,null,4.8,1.4,null,5.1,1.6,null,4.6,1.4,null,5.3,1.5,null,5.0,1.4,null],"name":"setosa","mode":"lines","type":"scatter","line":{"color":"#1B9E77","width":3},"opacity":0.4,"x":[3.5,0.2,null,3.0,0.2,null,3.2,0.2,null,3.1,0.2,null,3.6,0.2,null,3.9,0.4,null,3.4,0.3,null,3.4,0.2,null,2.9,0.2,null,3.1,0.1,null,3.7,0.2,null,3.4,0.2,null,3.0,0.1,null,3.0,0.1,null,4.0,0.2,null,4.4,0.4,null,3.9,0.4,null,3.5,0.3,null,3.8,0.3,null,3.8,0.3,null,3.4,0.2,null,3.7,0.4,null,3.6,0.2,null,3.3,0.5,null,3.4,0.2,null,3.0,0.2,null,3.4,0.4,null,3.5,0.2,null,3.4,0.2,null,3.2,0.2,null,3.1,0.2,null,3.4,0.4,null,4.1,0.1,null,4.2,0.2,null,3.1,0.2,null,3.2,0.2,null,3.5,0.2,null,3.6,0.1,null,3.0,0.2,null,3.4,0.2,null,3.5,0.3,null,2.3,0.3,null,3.2,0.2,null,3.5,0.6,null,3.8,0.4,null,3.0,0.3,null,3.8,0.2,null,3.2,0.2,null,3.7,0.2,null,3.3,0.2,null]},{"y":[7.0,4.7,null,6.4,4.5,null,6.9,4.9,null,5.5,4.0,null,6.5,4.6,null,5.7,4.5,null,6.3,4.7,null,4.9,3.3,null,6.6,4.6,null,5.2,3.9,null,5.0,3.5,null,5.9,4.2,null,6.0,4.0,null,6.1,4.7,null,5.6,3.6,null,6.7,4.4,null,5.6,4.5,null,5.8,4.1,null,6.2,4.5,null,5.6,3.9,null,5.9,4.8,null,6.1,4.0,null,6.3,4.9,null,6.1,4.7,null,6.4,4.3,null,6.6,4.4,null,6.8,4.8,null,6.7,5.0,null,6.0,4.5,null,5.7,3.5,null,5.5,3.8,null,5.5,3.7,null,5.8,3.9,null,6.0,5.1,null,5.4,4.5,null,6.0,4.5,null,6.7,4.7,null,6.3,4.4,null,5.6,4.1,null,5.5,4.0,null,5.5,4.4,null,6.1,4.6,null,5.8,4.0,null,5.0,3.3,null,5.6,4.2,null,5.7,4.2,null,5.7,4.2,null,6.2,4.3,null,5.1,3.0,null,5.7,4.1,null],"name":"versicolor","mode":"lines","type":"scatter","line":{"color":"#D95F02","width":3},"opacity":0.4,"x":[3.2,1.4,null,3.2,1.5,null,3.1,1.5,null,2.3,1.3,null,2.8,1.5,null,2.8,1.3,null,3.3,1.6,null,2.4,1.0,null,2.9,1.3,null,2.7,1.4,null,2.0,1.0,null,3.0,1.5,null,2.2,1.0,null,2.9,1.4,null,2.9,1.3,null,3.1,1.4,null,3.0,1.5,null,2.7,1.0,null,2.2,1.5,null,2.5,1.1,null,3.2,1.8,null,2.8,1.3,null,2.5,1.5,null,2.8,1.2,null,2.9,1.3,null,3.0,1.4,null,2.8,1.4,null,3.0,1.7,null,2.9,1.5,null,2.6,1.0,null,2.4,1.1,null,2.4,1.0,null,2.7,1.2,null,2.7,1.6,null,3.0,1.5,null,3.4,1.6,null,3.1,1.5,null,2.3,1.3,null,3.0,1.3,null,2.5,1.3,null,2.6,1.2,null,3.0,1.4,null,2.6,1.2,null,2.3,1.0,null,2.7,1.3,null,3.0,1.2,null,2.9,1.3,null,2.9,1.3,null,2.5,1.1,null,2.8,1.3,null]},{"y":[6.3,6.0,null,5.8,5.1,null,7.1,5.9,null,6.3,5.6,null,6.5,5.8,null,7.6,6.6,null,4.9,4.5,null,7.3,6.3,null,6.7,5.8,null,7.2,6.1,null,6.5,5.1,null,6.4,5.3,null,6.8,5.5,null,5.7,5.0,null,5.8,5.1,null,6.4,5.3,null,6.5,5.5,null,7.7,6.7,null,7.7,6.9,null,6.0,5.0,null,6.9,5.7,null,5.6,4.9,null,7.7,6.7,null,6.3,4.9,null,6.7,5.7,null,7.2,6.0,null,6.2,4.8,null,6.1,4.9,null,6.4,5.6,null,7.2,5.8,null,7.4,6.1,null,7.9,6.4,null,6.4,5.6,null,6.3,5.1,null,6.1,5.6,null,7.7,6.1,null,6.3,5.6,null,6.4,5.5,null,6.0,4.8,null,6.9,5.4,null,6.7,5.6,null,6.9,5.1,null,5.8,5.1,null,6.8,5.9,null,6.7,5.7,null,6.7,5.2,null,6.3,5.0,null,6.5,5.2,null,6.2,5.4,null,5.9,5.1,null],"name":"virginica","mode":"lines","type":"scatter","line":{"color":"#7570B3","width":3},"opacity":0.4,"x":[3.3,2.5,null,2.7,1.9,null,3.0,2.1,null,2.9,1.8,null,3.0,2.2,null,3.0,2.1,null,2.5,1.7,null,2.9,1.8,null,2.5,1.8,null,3.6,2.5,null,3.2,2.0,null,2.7,1.9,null,3.0,2.1,null,2.5,2.0,null,2.8,2.4,null,3.2,2.3,null,3.0,1.8,null,3.8,2.2,null,2.6,2.3,null,2.2,1.5,null,3.2,2.3,null,2.8,2.0,null,2.8,2.0,null,2.7,1.8,null,3.3,2.1,null,3.2,1.8,null,2.8,1.8,null,3.0,1.8,null,2.8,2.1,null,3.0,1.6,null,2.8,1.9,null,3.8,2.0,null,2.8,2.2,null,2.8,1.5,null,2.6,1.4,null,3.0,2.3,null,3.4,2.4,null,3.1,1.8,null,3.0,1.8,null,3.1,2.1,null,3.1,2.4,null,3.1,2.3,null,2.7,1.9,null,3.2,2.3,null,3.3,2.5,null,3.0,2.3,null,2.5,1.9,null,3.0,2.0,null,3.4,2.3,null,3.0,1.8,null]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y"},"title":null}, {});</script></div>
</section>
</section>
<section id="varying-color-and-size" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="varying-color-and-size"><span class="header-section-number">4.8</span> Varying color and size</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:ABCD</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">11</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">:EFGH</span> [<span class="dv">5</span> <span class="fl">2.5</span> <span class="dv">5</span> <span class="fl">7.5</span> <span class="dv">5</span> <span class="fl">2.5</span> <span class="fl">7.5</span> <span class="fl">4.5</span> <span class="fl">5.5</span> <span class="dv">5</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">:IJKL</span> [<span class="at">:A</span> <span class="at">:A</span> <span class="at">:A</span> <span class="at">:A</span> <span class="at">:A</span> <span class="at">:B</span> <span class="at">:B</span> <span class="at">:B</span> <span class="at">:B</span> <span class="at">:B</span>]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">:MNOP</span> [<span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span>]}</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=title <span class="st">"IJKLMNOP"</span>})</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=x <span class="at">:ABCD</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:EFGH</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:IJKL</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                         :=size <span class="at">:MNOP</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"QRST1"</span>})</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>     {:=title <span class="st">"IJKL MNOP"</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>      :=x <span class="at">:ABCD</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:ABCD</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>      :=name <span class="st">"QRST2"</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>      :=mark-color <span class="st">"magenta"</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.2</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"QRST1 :A :C","x":[1,3,5],"y":[5.0,5.0,5.0],"marker":{"color":"#1B9E77","size":5}},{"mode":"markers","type":"scatter","name":"QRST1 :A :D","x":[2,4],"y":[2.5,7.5],"marker":{"color":"#1B9E77","size":7}},{"mode":"markers","type":"scatter","name":"QRST1 :B :D","x":[6,8,10],"y":[2.5,4.5,5.0],"marker":{"color":"#D95F02","size":7}},{"mode":"markers","type":"scatter","name":"QRST1 :B :C","x":[7,9],"y":[7.5,5.5],"marker":{"color":"#D95F02","size":5}},{"y":[1,2,3,4,5,6,7,8,9,10],"name":"QRST2","mode":"lines","type":"scatter","line":{"color":"magenta","width":20},"opacity":0.2,"x":[1,2,3,4,5,6,7,8,9,10]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"ABCD"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"ABCD"},"title":"IJKLMNOP"}, {});</script></div>
</section>
<section id="time-series" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="time-series"><span class="header-section-number">4.9</span> Time series</h2>
<p>Date and time fields are handle appropriately. Let us, for example, draw the time series of unemployment counts.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:date</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:value</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>      :=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"lines","type":"scatter","name":"","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"line":{"color":"purple"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value"},"title":null}, {});</script></div>
</section>
<section id="multiple-layers" class="level2" data-number="4.10">
<h2 data-number="4.10" class="anchored" data-anchor-id="multiple-layers"><span class="header-section-number">4.10</span> Multiple layers</h2>
<p>We can draw more than one layer:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=x <span class="at">:date</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:value</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                         :=mark-color <span class="st">"green"</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span>})</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line {:=x <span class="at">:date</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                        :=y <span class="at">:value</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                        :=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"name":"","marker":{"color":"green","size":20},"mode":"markers","type":"scatter","opacity":0.5,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"]},{"mode":"lines","type":"scatter","name":"","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"line":{"color":"purple"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value"},"title":null}, {});</script></div>
<p>We can also use the <code>base</code> function for the common parameters across layers:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=x <span class="at">:date</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span>})</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line {:=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"name":"","marker":{"color":"green","size":20},"mode":"markers","type":"scatter","opacity":0.5,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"]},{"mode":"lines","type":"scatter","name":"","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"line":{"color":"purple"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value"},"title":null}, {});</script></div>
<p>Layers can be named:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=x <span class="at">:date</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"points"</span>})</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line {:=mark-color <span class="st">"purple"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>                        :=name <span class="st">"line"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"name":"points","marker":{"color":"green","size":20},"mode":"markers","type":"scatter","opacity":0.5,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"]},{"mode":"lines","type":"scatter","name":"line","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"line":{"color":"purple"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value"},"title":null}, {});</script></div>
</section>
<section id="updating-data" class="level2" data-number="4.11">
<h2 data-number="4.11" class="anchored" data-anchor-id="updating-data"><span class="header-section-number">4.11</span> Updating data</h2>
<p>We can use the <code>update-data</code> function to vary the dataset along a plotting pipeline, affecting the layers that follow.</p>
<p>This functionality is inspired by <a href="https://github.com/mjskay/ggbuilder">ggbuilder</a> and <a href="https://github.com/scicloj/metamorph">metamorph</a>.</p>
<p>Here, for example, we draw a line, then sample 5 data rows, and draw them as points:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=x <span class="at">:date</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line {:=mark-color <span class="st">"purple"</span>})</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/update-data tc/random <span class="dv">5</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">15</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"lines","type":"scatter","name":"","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"line":{"color":"purple"}},{"y":[7042.0,7430.0,10787.0,6047.0,8098.0],"name":"","marker":{"color":"green","size":15},"mode":"markers","type":"scatter","opacity":0.5,"x":["2001-08-01","1995-05-01","2013-11-01","1998-05-01","1980-06-01"]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value"},"title":null}, {});</script></div>
</section>
<section id="smoothing" class="level2" data-number="4.12">
<h2 data-number="4.12" class="anchored" data-anchor-id="smoothing"><span class="header-section-number">4.12</span> Smoothing</h2>
<p><code>layer-smooth</code> is a layer that applies some statistical processing to the dataset to model it as a smooth shape. It is inspired by ggplotâ€™s <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a>.</p>
<p>At the moment, it can only be used to model <code>:=y</code> by linear regression. Soon we will add more ways of modelling the data.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=title <span class="st">"dummy"</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                  :=mark-color <span class="st">"green"</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=name <span class="st">"Actual"</span>})</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-smooth {:=mark-color <span class="st">"orange"</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>})</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    ploclo/plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"Actual","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"marker":{"color":"green"}},{"mode":"lines","type":"scatter","name":"Predicted","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[5.744458836939828,5.85613936750478,5.811467155278799,5.83380326139179,5.722122730826838,5.655114412487867,5.766794943052819,5.766794943052819,5.878475473617771,5.83380326139179,5.699786624713847,5.766794943052819,5.85613936750478,5.85613936750478,5.632778306374877,5.543433881922915,5.655114412487867,5.744458836939828,5.677450518600858,5.677450518600858,5.766794943052819,5.699786624713847,5.722122730826838,5.7891310491658095,5.766794943052819,5.85613936750478,5.766794943052819,5.744458836939828,5.766794943052819,5.811467155278799,5.83380326139179,5.766794943052819,5.610442200261886,5.588106094148896,5.83380326139179,5.811467155278799,5.744458836939828,5.722122730826838,5.85613936750478,5.766794943052819,5.744458836939828,6.012492110295713,5.811467155278799,5.744458836939828,5.677450518600858,5.85613936750478,5.677450518600858,5.811467155278799,5.699786624713847,5.7891310491658095,5.811467155278799,5.811467155278799,5.83380326139179,6.012492110295713,5.900811579730761,5.900811579730761,5.7891310491658095,5.990156004182722,5.878475473617771,5.923147685843751,6.079500428634684,5.85613936750478,6.034828216408703,5.878475473617771,5.878475473617771,5.83380326139179,5.85613936750478,5.923147685843751,6.034828216408703,5.967819898069732,5.811467155278799,5.900811579730761,5.967819898069732,5.900811579730761,5.878475473617771,5.85613936750478,5.900811579730761,5.85613936750478,5.878475473617771,5.945483791956741,5.990156004182722,5.990156004182722,5.923147685843751,5.923147685843751,5.85613936750478,5.766794943052819,5.83380326139179,6.012492110295713,5.85613936750478,5.967819898069732,5.945483791956741,5.85613936750478,5.945483791956741,6.012492110295713,5.923147685843751,5.85613936750478,5.878475473617771,5.878475473617771,5.967819898069732,5.900811579730761,5.7891310491658095,5.923147685843751,5.85613936750478,5.878475473617771,5.85613936750478,5.85613936750478,5.967819898069732,5.878475473617771,5.967819898069732,5.722122730826838,5.811467155278799,5.923147685843751,5.85613936750478,5.967819898069732,5.900811579730761,5.811467155278799,5.85613936750478,5.677450518600858,5.945483791956741,6.034828216408703,5.811467155278799,5.900811579730761,5.900811579730761,5.923147685843751,5.7891310491658095,5.811467155278799,5.900811579730761,5.85613936750478,5.900811579730761,5.85613936750478,5.900811579730761,5.677450518600858,5.900811579730761,5.900811579730761,5.945483791956741,5.85613936750478,5.766794943052819,5.83380326139179,5.85613936750478,5.83380326139179,5.83380326139179,5.83380326139179,5.923147685843751,5.811467155278799,5.7891310491658095,5.85613936750478,5.967819898069732,5.85613936750478,5.766794943052819,5.85613936750478],"line":{"color":"orange"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":"dummy"}, {});</script></div>
<p>By default, the regression is computed with only one predictor variable, which is <code>:=x</code>. But this can be overriden using the <code>:predictors</code> key. We may compute a regression with more than one predictor.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=x <span class="at">:sepal-width</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=name <span class="st">"Actual"</span>})</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-smooth {:=predictors [<span class="at">:petal-width</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">:petal-length</span>]</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>                          :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>})</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    ploclo/plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"Actual","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9]},{"mode":"lines","type":"scatter","opacity":0.5,"name":"Predicted","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[4.885160331757632,4.885160331757632,4.830982616383621,4.939338047131642,4.885160331757632,4.9837833657495505,4.853205275692575,4.939338047131642,4.885160331757632,4.9712931031966985,4.939338047131642,4.993515762505653,4.9171153878226885,4.754582241700657,4.77680490100961,4.875427935001529,4.767072504253508,4.853205275692575,5.015738421814607,4.907382991066585,5.047693477879664,4.875427935001529,4.6684494702615895,4.951828309684494,5.156048908627684,4.993515762505653,4.92960565037554,4.939338047131642,4.885160331757632,4.993515762505653,4.993515762505653,4.875427935001529,4.9712931031966985,4.885160331757632,4.939338047131642,4.77680490100961,4.830982616383621,4.9171153878226885,4.830982616383621,4.939338047131642,4.799027560318565,4.799027560318565,4.830982616383621,4.865695538245427,5.092138796497571,4.853205275692575,4.993515762505653,4.885160331757632,4.939338047131642,4.885160331757632,6.289564266319303,6.149253779506225,6.365964641002267,5.942275314766285,6.203431494880235,6.213163891636338,6.22565415418919,5.65889647534338,6.267341607010348,5.856142543327218,5.767251906091401,5.986720633384193,6.038140482961454,6.289564266319303,5.725564453270243,6.127031120197271,6.149253779506225,6.092318198335464,6.149253779506225,5.952007711522388,6.215921757433087,5.942275314766285,6.365964641002267,6.353474378449415,6.104808460888316,6.127031120197271,6.343741981693313,6.356232244246165,6.149253779506225,5.767251906091401,5.897829996148376,5.875607336839423,5.920052655457331,6.4423650156852315,6.149253779506225,6.117298723441168,6.257609210254246,6.158986176262327,5.996453030140295,5.942275314766285,6.190941232327384,6.235386550945291,5.974230370831341,5.65889647534338,6.050630745514306,6.082585801579363,6.050630745514306,6.104808460888316,5.464408273156292,5.996453030140295,6.642368949465818,6.346499847490062,6.716011458352034,6.649343480425171,6.629878686912966,7.095255465970107,6.085343667376112,7.028587488043245,6.757698911173192,6.696546664839829,6.314544791425005,6.4548552782380835,6.499300596855991,6.260367076050995,6.186724567164779,6.327035053977857,6.595165765051161,7.117478125279062,7.193878499962027,6.420142356376278,6.5437459154739,6.206189360676985,7.181388237409175,6.270099472807098,6.607656027604012,6.866054341921213,6.215921757433087,6.270099472807098,6.553478312230002,6.821609023303305,6.8882770012301675,7.0188550912871435,6.521523256164945,6.474320071750288,6.777163704685397,6.760456776969942,6.457613144034832,6.595165765051161,6.215921757433087,6.44512288148198,6.457613144034832,6.218679623229836,6.346499847490062,6.6521013462219205,6.479835803343787,6.272857338603847,6.292322132116052,6.368722506799016,6.381212769351868,6.378454903555118]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":null}, {});</script></div>
</section>
<section id="grouping" class="level2" data-number="4.13">
<h2 data-number="4.13" class="anchored" data-anchor-id="grouping"><span class="header-section-number">4.13</span> Grouping</h2>
<p>The regression computed by <code>haclo/layer-smooth</code> is affected by the inferred grouping of the data.</p>
<p>For example, here we recieve three regression lines, each for every species.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=title <span class="st">"dummy"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                  :=color <span class="at">:species</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    ploclo/layer-point</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    ploclo/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"setosa","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"marker":{"color":"#1B9E77"}},{"mode":"markers","type":"scatter","name":"versicolor","x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"marker":{"color":"#D95F02"}},{"mode":"markers","type":"scatter","name":"virginica","x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"marker":{"color":"#7570B3"}},{"mode":"lines","type":"scatter","name":"setosa","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"y":[5.055715259629592,4.71047040109079,4.848568344506311,4.77951937279855,5.124764231337354,5.3319111464606355,4.986666287921832,4.986666287921832,4.641421429383028,4.77951937279855,5.193813203045114,4.986666287921832,4.71047040109079,4.71047040109079,5.4009601181683955,5.677156004999438,5.3319111464606355,5.055715259629592,5.262862174752874,5.262862174752874,4.986666287921832,5.193813203045114,5.124764231337354,4.917617316214071,4.986666287921832,4.71047040109079,4.986666287921832,5.055715259629592,4.986666287921832,4.848568344506311,4.77951937279855,4.986666287921832,5.4700090898761555,5.539058061583917,4.77951937279855,4.848568344506311,5.055715259629592,5.124764231337354,4.71047040109079,4.986666287921832,5.055715259629592,4.227127599136464,4.848568344506311,5.055715259629592,5.262862174752874,4.71047040109079,5.262862174752874,4.848568344506311,5.193813203045114,4.917617316214071],"line":{"color":"#1B9E77"}},{"mode":"lines","type":"scatter","name":"versicolor","x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"y":[6.307983419689125,6.307983419689125,6.2214756476684,5.529413471502593,5.961952331606222,5.961952331606222,6.39449119170985,5.615921243523319,6.048460103626947,5.875444559585497,5.269890155440416,6.134967875647674,5.4429056994818685,6.048460103626947,6.048460103626947,6.2214756476684,6.134967875647674,5.875444559585497,5.4429056994818685,5.702429015544045,6.307983419689125,5.961952331606222,5.702429015544045,5.961952331606222,6.048460103626947,6.134967875647674,5.961952331606222,6.134967875647674,6.048460103626947,5.78893678756477,5.615921243523319,5.615921243523319,5.875444559585497,5.875444559585497,6.134967875647674,6.480998963730577,6.2214756476684,5.529413471502593,6.134967875647674,5.702429015544045,5.78893678756477,6.134967875647674,5.78893678756477,5.529413471502593,5.875444559585497,6.134967875647674,6.048460103626947,6.048460103626947,5.702429015544045,5.961952331606222],"line":{"color":"#D95F02"}},{"mode":"lines","type":"scatter","name":"virginica","x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[6.881900239394058,6.3409795533927245,6.611439896393391,6.521286448726502,6.611439896393391,6.611439896393391,6.160672658058946,6.521286448726502,6.160672658058946,7.152360582394726,6.79174679172717,6.3409795533927245,6.611439896393391,6.160672658058946,6.431133001059613,6.79174679172717,6.611439896393391,7.332667477728505,6.250826105725835,5.890212315058278,6.79174679172717,6.431133001059613,6.431133001059613,6.3409795533927245,6.881900239394058,6.79174679172717,6.431133001059613,6.611439896393391,6.431133001059613,6.611439896393391,6.431133001059613,7.332667477728505,6.431133001059613,6.431133001059613,6.250826105725835,6.611439896393391,6.9720536870609475,6.701593344060281,6.611439896393391,6.701593344060281,6.701593344060281,6.701593344060281,6.3409795533927245,6.79174679172717,6.881900239394058,6.611439896393391,6.160672658058946,6.611439896393391,6.9720536870609475,6.611439896393391],"line":{"color":"#7570B3"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":"dummy"}, {});</script></div>
<p>This happened because the <code>:color</code> field was <code>:species</code>, which is of <code>:nominal</code> type.</p>
<p>But we may override this using the <code>:group</code> key. For example, let us avoid grouping:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=title <span class="st">"dummy"</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>                  :=color <span class="at">:species</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                  :=group []</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    ploclo/layer-point</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    ploclo/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"setosa","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"marker":{"color":"#1B9E77"}},{"mode":"markers","type":"scatter","name":"versicolor","x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"marker":{"color":"#D95F02"}},{"mode":"markers","type":"scatter","name":"virginica","x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"marker":{"color":"#7570B3"}},{"mode":"lines","type":"scatter","name":"setosa","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"y":[5.744458836939828,5.85613936750478,5.811467155278799,5.83380326139179,5.722122730826838,5.655114412487867,5.766794943052819,5.766794943052819,5.878475473617771,5.83380326139179,5.699786624713847,5.766794943052819,5.85613936750478,5.85613936750478,5.632778306374877,5.543433881922915,5.655114412487867,5.744458836939828,5.677450518600858,5.677450518600858,5.766794943052819,5.699786624713847,5.722122730826838,5.7891310491658095,5.766794943052819,5.85613936750478,5.766794943052819,5.744458836939828,5.766794943052819,5.811467155278799,5.83380326139179,5.766794943052819,5.610442200261886,5.588106094148896,5.83380326139179,5.811467155278799,5.744458836939828,5.722122730826838,5.85613936750478,5.766794943052819,5.744458836939828,6.012492110295713,5.811467155278799,5.744458836939828,5.677450518600858,5.85613936750478,5.677450518600858,5.811467155278799,5.699786624713847,5.7891310491658095],"line":{"color":"#1B9E77"}},{"mode":"lines","type":"scatter","name":"versicolor","x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"y":[5.811467155278799,5.811467155278799,5.83380326139179,6.012492110295713,5.900811579730761,5.900811579730761,5.7891310491658095,5.990156004182722,5.878475473617771,5.923147685843751,6.079500428634684,5.85613936750478,6.034828216408703,5.878475473617771,5.878475473617771,5.83380326139179,5.85613936750478,5.923147685843751,6.034828216408703,5.967819898069732,5.811467155278799,5.900811579730761,5.967819898069732,5.900811579730761,5.878475473617771,5.85613936750478,5.900811579730761,5.85613936750478,5.878475473617771,5.945483791956741,5.990156004182722,5.990156004182722,5.923147685843751,5.923147685843751,5.85613936750478,5.766794943052819,5.83380326139179,6.012492110295713,5.85613936750478,5.967819898069732,5.945483791956741,5.85613936750478,5.945483791956741,6.012492110295713,5.923147685843751,5.85613936750478,5.878475473617771,5.878475473617771,5.967819898069732,5.900811579730761],"line":{"color":"#D95F02"}},{"mode":"lines","type":"scatter","name":"virginica","x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[5.7891310491658095,5.923147685843751,5.85613936750478,5.878475473617771,5.85613936750478,5.85613936750478,5.967819898069732,5.878475473617771,5.967819898069732,5.722122730826838,5.811467155278799,5.923147685843751,5.85613936750478,5.967819898069732,5.900811579730761,5.811467155278799,5.85613936750478,5.677450518600858,5.945483791956741,6.034828216408703,5.811467155278799,5.900811579730761,5.900811579730761,5.923147685843751,5.7891310491658095,5.811467155278799,5.900811579730761,5.85613936750478,5.900811579730761,5.85613936750478,5.900811579730761,5.677450518600858,5.900811579730761,5.900811579730761,5.945483791956741,5.85613936750478,5.766794943052819,5.83380326139179,5.85613936750478,5.83380326139179,5.83380326139179,5.83380326139179,5.923147685843751,5.811467155278799,5.7891310491658095,5.85613936750478,5.967819898069732,5.85613936750478,5.766794943052819,5.85613936750478],"line":{"color":"#7570B3"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":"dummy"}, {});</script></div>
<p>Alternatively, we may assign the <code>:=color</code> only to the points layer without affecting the smoothing layer.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=title <span class="st">"dummy"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=color <span class="at">:species</span>})</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-smooth {:=name <span class="st">"Predicted"</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                          :=mark-color <span class="st">"blue"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"markers","type":"scatter","name":"setosa","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"marker":{"color":"#1B9E77"}},{"mode":"markers","type":"scatter","name":"versicolor","x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"marker":{"color":"#D95F02"}},{"mode":"markers","type":"scatter","name":"virginica","x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"marker":{"color":"#7570B3"}},{"mode":"lines","type":"scatter","name":"Predicted","x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"y":[5.744458836939828,5.85613936750478,5.811467155278799,5.83380326139179,5.722122730826838,5.655114412487867,5.766794943052819,5.766794943052819,5.878475473617771,5.83380326139179,5.699786624713847,5.766794943052819,5.85613936750478,5.85613936750478,5.632778306374877,5.543433881922915,5.655114412487867,5.744458836939828,5.677450518600858,5.677450518600858,5.766794943052819,5.699786624713847,5.722122730826838,5.7891310491658095,5.766794943052819,5.85613936750478,5.766794943052819,5.744458836939828,5.766794943052819,5.811467155278799,5.83380326139179,5.766794943052819,5.610442200261886,5.588106094148896,5.83380326139179,5.811467155278799,5.744458836939828,5.722122730826838,5.85613936750478,5.766794943052819,5.744458836939828,6.012492110295713,5.811467155278799,5.744458836939828,5.677450518600858,5.85613936750478,5.677450518600858,5.811467155278799,5.699786624713847,5.7891310491658095,5.811467155278799,5.811467155278799,5.83380326139179,6.012492110295713,5.900811579730761,5.900811579730761,5.7891310491658095,5.990156004182722,5.878475473617771,5.923147685843751,6.079500428634684,5.85613936750478,6.034828216408703,5.878475473617771,5.878475473617771,5.83380326139179,5.85613936750478,5.923147685843751,6.034828216408703,5.967819898069732,5.811467155278799,5.900811579730761,5.967819898069732,5.900811579730761,5.878475473617771,5.85613936750478,5.900811579730761,5.85613936750478,5.878475473617771,5.945483791956741,5.990156004182722,5.990156004182722,5.923147685843751,5.923147685843751,5.85613936750478,5.766794943052819,5.83380326139179,6.012492110295713,5.85613936750478,5.967819898069732,5.945483791956741,5.85613936750478,5.945483791956741,6.012492110295713,5.923147685843751,5.85613936750478,5.878475473617771,5.878475473617771,5.967819898069732,5.900811579730761,5.7891310491658095,5.923147685843751,5.85613936750478,5.878475473617771,5.85613936750478,5.85613936750478,5.967819898069732,5.878475473617771,5.967819898069732,5.722122730826838,5.811467155278799,5.923147685843751,5.85613936750478,5.967819898069732,5.900811579730761,5.811467155278799,5.85613936750478,5.677450518600858,5.945483791956741,6.034828216408703,5.811467155278799,5.900811579730761,5.900811579730761,5.923147685843751,5.7891310491658095,5.811467155278799,5.900811579730761,5.85613936750478,5.900811579730761,5.85613936750478,5.900811579730761,5.677450518600858,5.900811579730761,5.900811579730761,5.945483791956741,5.85613936750478,5.766794943052819,5.83380326139179,5.85613936750478,5.83380326139179,5.83380326139179,5.83380326139179,5.923147685843751,5.811467155278799,5.7891310491658095,5.85613936750478,5.967819898069732,5.85613936750478,5.766794943052819,5.85613936750478],"line":{"color":"blue"}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length"},"title":"dummy"}, {});</script></div>
</section>
<section id="example-out-of-sample-predictions" class="level2" data-number="4.14">
<h2 data-number="4.14" class="anchored" data-anchor-id="example-out-of-sample-predictions"><span class="header-section-number">4.14</span> Example: out-of-sample predictions</h2>
<p>Here is a slighly more elaborate example inpired by the London Clojurians <a href="https://www.youtube.com/watch?v=eUFf3-og_-Y">talk</a> mentioned in the preface.</p>
<p>Assume we wish to predict the unemployment rate for 96 months. Let us add those months to our dataset, and mark them as <code>Future</code> (considering the original data as <code>Past</code>):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:relative-time</span> <span class="st">"Past"</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:date</span> (<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">:date</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="kw">last</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>                                      (datetime/plus-temporal-amount (<span class="kw">range</span> <span class="dv">96</span>) <span class="at">:days</span>))</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:relative-time</span> <span class="st">"Future"</span>}))</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    (print/print-range <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>ggplot2/economics_long [670 6]:</p>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 17%">
<col style="width: 15%">
<col style="width: 11%">
<col style="width: 17%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">:rownames</th>
<th>:date</th>
<th>:variable</th>
<th style="text-align: right;">:value</th>
<th style="text-align: right;">:value01</th>
<th>:relative-time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2297</td>
<td>1967-07-01</td>
<td>unemploy</td>
<td style="text-align: right;">2944.0</td>
<td style="text-align: right;">0.02044683</td>
<td>Past</td>
</tr>
<tr class="even">
<td style="text-align: right;">2298</td>
<td>1967-08-01</td>
<td>unemploy</td>
<td style="text-align: right;">2945.0</td>
<td style="text-align: right;">0.02052578</td>
<td>Past</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2299</td>
<td>1967-09-01</td>
<td>unemploy</td>
<td style="text-align: right;">2958.0</td>
<td style="text-align: right;">0.02155206</td>
<td>Past</td>
</tr>
<tr class="even">
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2015-07-02</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2015-07-03</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2015-07-04</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2015-07-05</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
</tbody>
</table>
</div>
<p>Let us represent our dates as numbers, so that we can use them in linear regression:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:relative-time</span> <span class="st">"Past"</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:date</span> (<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">:date</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="kw">last</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>                                      (datetime/plus-temporal-amount (<span class="kw">range</span> <span class="dv">96</span>) <span class="at">:months</span>))</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:relative-time</span> <span class="st">"Future"</span>}))</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:year</span> #(datetime/long-temporal-field <span class="at">:years</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:month</span> #(datetime/long-temporal-field <span class="at">:months</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    (tc/map-columns <span class="at">:yearmonth</span> [<span class="at">:year</span> <span class="at">:month</span>] (<span class="kw">fn</span> [y m] (<span class="kw">+</span> m (<span class="kw">*</span> <span class="dv">12</span> y))))</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    (print/print-range <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>ggplot2/economics_long [670 9]:</p>
<table class="table">
<colgroup>
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">:rownames</th>
<th>:date</th>
<th>:variable</th>
<th style="text-align: right;">:value</th>
<th style="text-align: right;">:value01</th>
<th>:relative-time</th>
<th style="text-align: right;">:year</th>
<th style="text-align: right;">:month</th>
<th style="text-align: right;">:yearmonth</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2297</td>
<td>1967-07-01</td>
<td>unemploy</td>
<td style="text-align: right;">2944.0</td>
<td style="text-align: right;">0.02044683</td>
<td>Past</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">23611</td>
</tr>
<tr class="even">
<td style="text-align: right;">2298</td>
<td>1967-08-01</td>
<td>unemploy</td>
<td style="text-align: right;">2945.0</td>
<td style="text-align: right;">0.02052578</td>
<td>Past</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">23612</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2299</td>
<td>1967-09-01</td>
<td>unemploy</td>
<td style="text-align: right;">2958.0</td>
<td style="text-align: right;">0.02155206</td>
<td>Past</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">23613</td>
</tr>
<tr class="even">
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2022-12-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2022</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">24276</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2023-01-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">24277</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2023-02-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">24278</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2023-03-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">24279</td>
</tr>
</tbody>
</table>
</div>
<p>Let us use the same regression line for the <code>Past</code> and <code>Future</code> groups. To do this, we avoid grouping by assigning <code>[]</code> to <code>:=group</code>. The line is affected only by the past, since in the Future, <code>:=y</code> is missing. We use the numerical field <code>:yearmonth</code> as the regression predictor, but for plotting, we still use the <code>:temporal</code> field <code>:date</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:relative-time</span> <span class="st">"Past"</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:date</span> (<span class="kw">-&gt;</span> datasets/economics-long</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">:date</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="kw">last</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                                      (datetime/plus-temporal-amount (<span class="kw">range</span> <span class="dv">96</span>) <span class="at">:months</span>))</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:relative-time</span> <span class="st">"Future"</span>}))</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:year</span> #(datetime/long-temporal-field <span class="at">:years</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:month</span> #(datetime/long-temporal-field <span class="at">:months</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    (tc/map-columns <span class="at">:yearmonth</span> [<span class="at">:year</span> <span class="at">:month</span>] (<span class="kw">fn</span> [y m] (<span class="kw">+</span> m (<span class="kw">*</span> <span class="dv">12</span> y))))</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    (ploclo/base {:=x <span class="at">:date</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-smooth {:=color <span class="at">:relative-time</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>                          :=mark-size <span class="dv">15</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>                          :=group []</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>                          :=predictors [<span class="at">:yearmonth</span>]})</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">;; Keep only the past for the following layer:</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    (ploclo/update-data (<span class="kw">fn</span> [dataset]</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>                          (<span class="kw">-&gt;</span> dataset</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>                              (tc/select-rows (<span class="kw">fn</span> [row]</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>                                                (<span class="kw">-&gt;</span> row <span class="at">:relative-time</span> (<span class="kw">=</span> <span class="st">"Past"</span>)))))))</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-line {:=mark-color <span class="st">"purple"</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>                        :=mark-size <span class="dv">3</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>                        :=name <span class="st">"Actual"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":"lines","type":"scatter","name":"Past","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[4820.148031355173,4830.448771572992,4840.749511790811,4851.05025200863,4861.350992226449,4871.651732444268,4881.952472662058,4892.2532128798775,4902.553953097697,4912.854693315516,4923.155433533335,4933.456173751154,4943.756913968973,4954.057654186763,4964.358394404582,4974.659134622401,4984.95987484022,4995.26061505804,5005.561355275859,5015.862095493678,5026.162835711468,5036.463575929287,5046.764316147106,5057.065056364925,5067.365796582744,5077.666536800563,5087.967277018382,5098.268017236172,5108.568757453992,5118.869497671811,5129.17023788963,5139.470978107449,5149.771718325268,5160.072458543087,5170.373198760877,5180.673938978696,5190.974679196515,5201.2754194143345,5211.576159632154,5221.876899849973,5232.177640067792,5242.478380285582,5252.779120503401,5263.07986072122,5273.380600939039,5283.681341156858,5293.982081374677,5304.2828215924965,5314.583561810316,5324.884302028106,5335.185042245925,5345.485782463744,5355.786522681563,5366.087262899382,5376.388003117201,5386.68874333502,5396.98948355281,5407.290223770629,5417.5909639884485,5427.891704206268,5438.192444424087,5448.493184641906,5458.793924859725,5469.094665077515,5479.395405295334,5489.696145513153,5499.996885730972,5510.297625948791,5520.5983661666105,5530.89910638443,5541.19984660222,5551.500586820039,5561.801327037858,5572.102067255677,5582.402807473496,5592.703547691315,5603.004287909134,5613.305028126924,5623.605768344743,5633.9065085625625,5644.207248780382,5654.507988998201,5664.80872921602,5675.109469433839,5685.410209651629,5695.710949869448,5706.011690087267,5716.312430305086,5726.613170522905,5736.9139107407245,5747.214650958544,5757.515391176334,5767.816131394153,5778.116871611972,5788.417611829791,5798.71835204761,5809.019092265429,5819.319832483248,5829.620572701038,5839.921312918857,5850.222053136677,5860.522793354496,5870.823533572315,5881.124273790134,5891.425014007953,5901.725754225772,5912.026494443562,5922.327234661381,5932.6279748792,5942.928715097019,5953.229455314839,5963.530195532658,5973.830935750477,5984.131675968267,5994.432416186086,6004.733156403905,6015.033896621724,6025.334636839543,6035.635377057362,6045.9361172751815,6056.2368574929715,6066.537597710791,6076.83833792861,6087.139078146429,6097.439818364248,6107.740558582067,6118.041298799886,6128.342039017676,6138.642779235495,6148.943519453314,6159.2442596711335,6169.544999888953,6179.845740106772,6190.146480324591,6200.447220542381,6210.7479607602,6221.048700978019,6231.349441195838,6241.650181413657,6251.950921631476,6262.2516618492955,6272.5524020670855,6282.853142284905,6293.153882502724,6303.454622720543,6313.755362938362,6324.056103156181,6334.356843374,6344.65758359179,6354.958323809609,6365.259064027428,6375.5598042452475,6385.860544463067,6396.161284680886,6406.462024898705,6416.762765116524,6427.063505334314,6437.364245552133,6447.664985769952,6457.965725987771,6468.26646620559,6478.5672064234095,6488.867946641229,6499.168686859019,6509.469427076838,6519.770167294657,6530.070907512476,6540.371647730295,6550.672387948114,6560.973128165933,6571.273868383723,6581.574608601542,6591.8753488193615,6602.176089037181,6612.476829255,6622.777569472819,6633.078309690638,6643.379049908428,6653.679790126247,6663.980530344066,6674.281270561885,6684.582010779704,6694.8827509975235,6705.183491215343,6715.484231433133,6725.784971650952,6736.085711868771,6746.38645208659,6756.687192304409,6766.987932522228,6777.288672740047,6787.589412957837,6797.890153175656,6808.190893393476,6818.491633611295,6828.792373829114,6839.093114046933,6849.393854264752,6859.694594482542,6869.995334700361,6880.29607491818,6890.596815135999,6900.8975553538185,6911.198295571638,6921.499035789457,6931.799776007276,6942.100516225066,6952.401256442885,6962.701996660704,6973.002736878523,6983.303477096342,6993.604217314161,7003.9049575319805,7014.2056977497705,7024.50643796759,7034.807178185409,7045.107918403228,7055.408658621047,7065.709398838866,7076.010139056685,7086.310879274475,7096.611619492294,7106.912359710113,7117.2130999279325,7127.513840145752,7137.814580363571,7148.11532058139,7158.41606079918,7168.716801016999,7179.017541234818,7189.318281452637,7199.619021670456,7209.919761888275,7220.2205021060945,7230.5212423238845,7240.821982541704,7251.122722759523,7261.423462977342,7271.724203195161,7282.02494341298,7292.325683630799,7302.626423848589,7312.927164066408,7323.227904284227,7333.5286445020465,7343.829384719866,7354.130124937685,7364.430865155504,7374.731605373294,7385.032345591113,7395.333085808932,7405.633826026751,7415.93456624457,7426.235306462389,7436.5360466802085,7446.8367868979985,7457.137527115818,7467.438267333637,7477.739007551456,7488.039747769275,7498.340487987094,7508.641228204913,7518.941968422732,7529.242708640522,7539.543448858341,7549.844189076161,7560.14492929398,7570.445669511799,7580.746409729618,7591.047149947437,7601.347890165227,7611.648630383046,7621.949370600865,7632.250110818684,7642.550851036503,7652.851591254323,7663.152331472142,7673.453071689932,7683.753811907751,7694.05455212557,7704.355292343389,7714.656032561208,7724.956772779027,7735.257512996846,7745.558253214636,7755.8589934324555,7766.159733650275,7776.460473868094,7786.761214085913,7797.061954303732,7807.362694521551,7817.663434739341,7827.96417495716,7838.264915174979,7848.565655392798,7858.8663956106175,7869.167135828437,7879.467876046256,7889.768616264046,7900.069356481865,7910.370096699684,7920.670836917503,7930.971577135322,7941.272317353141,7951.57305757096,7961.87379778875,7972.1745380065695,7982.475278224389,7992.776018442208,8003.076758660027,8013.377498877846,8023.678239095665,8033.978979313484,8044.279719531274,8054.580459749093,8064.881199966912,8075.1819401847315,8085.482680402551,8095.78342062037,8106.084160838189,8116.384901055979,8126.685641273798,8136.986381491617,8147.287121709436,8157.587861927255,8167.888602145074,8178.1893423628935,8188.4900825806835,8198.790822798503,8209.091563016322,8219.39230323414,8229.69304345196,8239.993783669779,8250.294523887598,8260.595264105388,8270.896004323207,8281.196744541026,8291.497484758846,8301.798224976665,8312.098965194484,8322.399705412303,8332.700445630093,8343.001185847912,8353.301926065731,8363.60266628355,8373.90340650137,8384.204146719188,8394.504886937008,8404.805627154798,8415.106367372617,8425.407107590436,8435.707847808255,8446.008588026074,8456.309328243893,8466.610068461712,8476.910808679502,8487.211548897321,8497.51228911514,8507.81302933296,8518.113769550779,8528.414509768598,8538.715249986417,8549.015990204236,8559.316730422026,8569.617470639845,8579.918210857664,8590.218951075483,8600.519691293302,8610.820431511122,8621.12117172894,8631.42191194673,8641.72265216455,8652.023392382369,8662.324132600188,8672.624872818007,8682.925613035826,8693.226353253645,8703.527093471435,8713.827833689254,8724.128573907074,8734.429314124893,8744.730054342712,8755.030794560531,8765.33153477835,8775.63227499614,8785.93301521396,8796.233755431778,8806.534495649597,8816.835235867416,8827.135976085236,8837.436716303055,8847.737456520845,8858.038196738664,8868.338936956483,8878.639677174302,8888.940417392121,8899.24115760994,8909.54189782776,8919.84263804555,8930.143378263369,8940.444118481188,8950.744858699007,8961.045598916826,8971.346339134645,8981.647079352464,8991.947819570254,9002.248559788073,9012.549300005892,9022.850040223711,9033.15078044153,9043.45152065935,9053.752260877169,9064.053001094959,9074.353741312778,9084.654481530597,9094.955221748416,9105.255961966235,9115.556702184054,9125.857442401873,9136.158182619693,9146.458922837483,9156.759663055302,9167.06040327312,9177.36114349094,9187.661883708759,9197.962623926578,9208.263364144397,9218.564104362187,9228.864844580006,9239.165584797825,9249.466325015645,9259.767065233464,9270.067805451283,9280.368545669102,9290.669285886892,9300.970026104711,9311.27076632253,9321.57150654035,9331.872246758168,9342.172986975987,9352.473727193807,9362.774467411597,9373.075207629416,9383.375947847235,9393.676688065054,9403.977428282873,9414.278168500692,9424.578908718511,9434.879648936301,9445.18038915412,9455.48112937194,9465.781869589759,9476.082609807578,9486.383350025397,9496.684090243216,9506.984830461006,9517.285570678825,9527.586310896644,9537.887051114463,9548.187791332282,9558.488531550101,9568.78927176792,9579.09001198571,9589.39075220353,9599.691492421349,9609.992232639168,9620.292972856987,9630.593713074806,9640.894453292625,9651.195193510444,9661.495933728234,9671.796673946053,9682.097414163873,9692.398154381692,9702.69889459951,9712.99963481733,9723.300375035149,9733.601115252939,9743.901855470758,9754.202595688577,9764.503335906396,9774.804076124215,9785.104816342035,9795.405556559854,9805.706296777644,9816.007036995463,9826.307777213282,9836.608517431101,9846.90925764892,9857.20999786674,9867.510738084558,9877.811478302348,9888.112218520168,9898.412958737987,9908.713698955806,9919.014439173625,9929.315179391444,9939.615919609263,9949.916659827053,9960.217400044872,9970.518140262691,9980.81888048051,9991.11962069833,10001.420360916149,10011.721101133968,10022.021841351758,10032.322581569577,10042.623321787396,10052.924062005215,10063.224802223034,10073.525542440853,10083.826282658672,10094.127022876462,10104.427763094282,10114.7285033121,10125.02924352992,10135.329983747739,10145.630723965558,10155.931464183377,10166.232204401196,10176.532944618986,10186.833684836805,10197.134425054624,10207.435165272444,10217.735905490263,10228.036645708082,10238.3373859259,10248.63812614369,10258.93886636151,10269.23960657933,10279.540346797148,10289.841087014967,10300.141827232786,10310.442567450606,10320.743307668396,10331.044047886215,10341.344788104034,10351.645528321853,10361.946268539672,10372.247008757491,10382.54774897531,10392.8484891931,10403.14922941092,10413.449969628738,10423.750709846558,10434.051450064377,10444.352190282196,10454.652930500015,10464.953670717805,10475.254410935624,10485.555151153443,10495.855891371262,10506.156631589081,10516.4573718069,10526.75811202472,10537.05885224251,10547.359592460329,10557.660332678148,10567.961072895967,10578.261813113786,10588.562553331605,10598.863293549424,10609.164033767214,10619.464773985033,10629.765514202853,10640.066254420672,10650.36699463849,10660.66773485631,10670.968475074129,10681.269215291919,10691.569955509738,10701.870695727557,10712.171435945376,10722.472176163195],"line":{"color":"#1B9E77","width":15}},{"mode":"lines","type":"scatter","name":"Future","x":["2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01"],"y":[10722.472176163195,10732.772916381015,10743.073656598834,10753.374396816653,10763.675137034443,10773.975877252262,10784.276617470081,10794.5773576879,10804.87809790572,10815.178838123538,10825.479578341357,10835.780318559147,10846.081058776967,10856.381798994786,10866.682539212605,10876.983279430424,10887.284019648243,10897.584759866062,10907.885500083852,10918.186240301671,10928.48698051949,10938.78772073731,10949.088460955129,10959.389201172948,10969.689941390767,10979.990681608557,10990.291421826376,11000.592162044195,11010.892902262014,11021.193642479833,11031.494382697652,11041.795122915471,11052.095863133261,11062.39660335108,11072.6973435689,11082.998083786719,11093.298824004538,11103.599564222357,11113.900304440176,11124.201044657966,11134.501784875785,11144.802525093604,11155.103265311423,11165.404005529243,11175.704745747062,11186.00548596488,11196.30622618267,11206.60696640049,11216.907706618309,11227.208446836128,11237.509187053947,11247.809927271766,11258.110667489585,11268.411407707405,11278.712147925195,11289.012888143014,11299.313628360833,11309.614368578652,11319.915108796471,11330.21584901429,11340.51658923211,11350.8173294499,11361.118069667718,11371.418809885537,11381.719550103357,11392.020290321176,11402.321030538995,11412.621770756814,11422.922510974604,11433.223251192423,11443.523991410242,11453.824731628061,11464.12547184588,11474.4262120637,11484.726952281519,11495.027692499309,11505.328432717128,11515.629172934947,11525.929913152766,11536.230653370585,11546.531393588404,11556.832133806223,11567.132874024013,11577.433614241832,11587.734354459652,11598.03509467747,11608.33583489529,11618.636575113109,11628.937315330928,11639.238055548718,11649.538795766537,11659.839535984356,11670.140276202175,11680.441016419994,11690.741756637814,11701.042496855633],"line":{"color":"#D95F02","width":15}},{"mode":"lines","type":"scatter","name":"Actual","x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"line":{"color":"purple","width":3}}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value"},"title":null}, {});</script></div>
</section>
<section id="histograms" class="level2" data-number="4.15">
<h2 data-number="4.15" class="anchored" data-anchor-id="histograms"><span class="header-section-number">4.15</span> Histograms</h2>
<p>Histograms can also be represented as layers with statistical processing:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-histogram {:=x <span class="at">:sepal-width</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":null,"type":"bar","name":"","y":[4,7,22,24,37,31,10,11,2,2]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"count"},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-histogram {:=x <span class="at">:sepal-width</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                             :=histogram-nbins <span class="dv">30</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":null,"type":"bar","name":"","y":[1,0,3,4,0,3,8,5,9,0,14,10,26,11,0,13,6,12,6,0,4,3,6,2,0,1,1,1,0,1]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"count"},"title":null}, {});</script></div>
</section>
<section id="debugging-wip" class="level2" data-number="4.16">
<h2 data-number="4.16" class="anchored" data-anchor-id="debugging-wip"><span class="header-section-number">4.16</span> Debugging (WIP)</h2>
<p>Viewing the computational dag of substitution keys:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=x <span class="at">:sepal-width</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:sepal-length</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:species</span>})</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    ploclo/dag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>
{
  value = {"elements":{"nodes":[{"data":{"id":"=y"}},{"data":{"id":"=y-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=y-type"}},{"data":{"id":"=y-after-stat"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=y"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=y-type"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=dataset-after-stat"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=color"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=color-type"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=size"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=size-type"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=mark"}},{"data":{"id":"=mode"}},{"data":{"id":"=size"}},{"data":{"id":"=size-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=size-type"}},{"data":{"id":"=mark"}},{"data":{"id":"=type"}},{"data":{"id":"=coordinates"}},{"data":{"id":"=type"}},{"data":{"id":"=x-after-stat"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=x"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=x-type"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=dataset-after-stat"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=layers"}},{"data":{"id":"=traces"}},{"data":{"id":"=x"}},{"data":{"id":"=x-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=x-type"}},{"data":{"id":"=color"}},{"data":{"id":"=color-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=color-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=dataset-after-stat"}},{"data":{"id":"=stat"}},{"data":{"id":"=dataset-after-stat"}},{"data":{"id":"=width"}},{"data":{"id":"=layout"}},{"data":{"id":"=height"}},{"data":{"id":"=layout"}},{"data":{"id":"=background"}},{"data":{"id":"=layout"}},{"data":{"id":"=title"}},{"data":{"id":"=layout"}},{"data":{"id":"=xaxis-gridcolor"}},{"data":{"id":"=layout"}},{"data":{"id":"=yaxis-gridcolor"}},{"data":{"id":"=layout"}},{"data":{"id":"=x-after-stat"}},{"data":{"id":"=layout"}},{"data":{"id":"=y-after-stat"}},{"data":{"id":"=layout"}},{"data":{"id":"=x-title"}},{"data":{"id":"=layout"}},{"data":{"id":"=y-title"}},{"data":{"id":"=layout"}},{"data":{"id":"=layers"}},{"data":{"id":"=layout"}},{"data":{"id":"=mode"}},{"data":{"id":"=marker-size-key"}},{"data":{"id":"=type"}},{"data":{"id":"=marker-size-key"}}],"edges":[{"data":{"id":":=y:=y-type","source":"=y","target":"=y-type"}},{"data":{"id":":=dataset:=y-type","source":"=dataset","target":"=y-type"}},{"data":{"id":":=y-after-stat:=y-type-after-stat","source":"=y-after-stat","target":"=y-type-after-stat"}},{"data":{"id":":=y:=y-type-after-stat","source":"=y","target":"=y-type-after-stat"}},{"data":{"id":":=y-type:=y-type-after-stat","source":"=y-type","target":"=y-type-after-stat"}},{"data":{"id":":=dataset-after-stat:=y-type-after-stat","source":"=dataset-after-stat","target":"=y-type-after-stat"}},{"data":{"id":":=color:=inferred-group","source":"=color","target":"=inferred-group"}},{"data":{"id":":=color-type:=inferred-group","source":"=color-type","target":"=inferred-group"}},{"data":{"id":":=size:=inferred-group","source":"=size","target":"=inferred-group"}},{"data":{"id":":=size-type:=inferred-group","source":"=size-type","target":"=inferred-group"}},{"data":{"id":":=mark:=mode","source":"=mark","target":"=mode"}},{"data":{"id":":=size:=size-type","source":"=size","target":"=size-type"}},{"data":{"id":":=dataset:=size-type","source":"=dataset","target":"=size-type"}},{"data":{"id":":=mark:=type","source":"=mark","target":"=type"}},{"data":{"id":":=coordinates:=type","source":"=coordinates","target":"=type"}},{"data":{"id":":=x-after-stat:=x-type-after-stat","source":"=x-after-stat","target":"=x-type-after-stat"}},{"data":{"id":":=x:=x-type-after-stat","source":"=x","target":"=x-type-after-stat"}},{"data":{"id":":=x-type:=x-type-after-stat","source":"=x-type","target":"=x-type-after-stat"}},{"data":{"id":":=dataset-after-stat:=x-type-after-stat","source":"=dataset-after-stat","target":"=x-type-after-stat"}},{"data":{"id":":=layers:=traces","source":"=layers","target":"=traces"}},{"data":{"id":":=x:=x-type","source":"=x","target":"=x-type"}},{"data":{"id":":=dataset:=x-type","source":"=dataset","target":"=x-type"}},{"data":{"id":":=color:=color-type","source":"=color","target":"=color-type"}},{"data":{"id":":=dataset:=color-type","source":"=dataset","target":"=color-type"}},{"data":{"id":":=dataset:=dataset-after-stat","source":"=dataset","target":"=dataset-after-stat"}},{"data":{"id":":=stat:=dataset-after-stat","source":"=stat","target":"=dataset-after-stat"}},{"data":{"id":":=width:=layout","source":"=width","target":"=layout"}},{"data":{"id":":=height:=layout","source":"=height","target":"=layout"}},{"data":{"id":":=background:=layout","source":"=background","target":"=layout"}},{"data":{"id":":=title:=layout","source":"=title","target":"=layout"}},{"data":{"id":":=xaxis-gridcolor:=layout","source":"=xaxis-gridcolor","target":"=layout"}},{"data":{"id":":=yaxis-gridcolor:=layout","source":"=yaxis-gridcolor","target":"=layout"}},{"data":{"id":":=x-after-stat:=layout","source":"=x-after-stat","target":"=layout"}},{"data":{"id":":=y-after-stat:=layout","source":"=y-after-stat","target":"=layout"}},{"data":{"id":":=x-title:=layout","source":"=x-title","target":"=layout"}},{"data":{"id":":=y-title:=layout","source":"=y-title","target":"=layout"}},{"data":{"id":":=layers:=layout","source":"=layers","target":"=layout"}},{"data":{"id":":=mode:=marker-size-key","source":"=mode","target":"=marker-size-key"}},{"data":{"id":":=type:=marker-size-key","source":"=type","target":"=marker-size-key"}}]},"style":[{"selector":"node","css":{"content":"data(id)","text-valign":"center","text-halign":"center"}},{"selector":"parent","css":{"text-valign":"top","text-halign":"center"}},{"selector":"edge","css":{"curve-style":"bezier","target-arrow-shape":"triangle"}}],"layout":{"name":"breadthfirst","padding":5}};
  value['container'] = document.currentScript.parentElement;
  cytoscape(value);
};</script></div>
<p>Viewing intermediate values in the computational dag:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=x <span class="at">:sepal-width</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:sepal-length</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:species</span>})</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/debug :=layers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:y</span> <span class="at">:sepal-length</span>,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">:trace-base</span> {<span class="at">:mode</span> <span class="at">:markers</span>, <span class="at">:type</span> <span class="st">"scatter"</span>},</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:color-type</span> <span class="at">:nominal</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:group</span> (<span class="at">:species</span>),</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">:color</span> <span class="at">:species</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">:mark</span> <span class="at">:point</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">:inferred-group</span> (<span class="at">:species</span>),</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> <span class="at">:sepal-width</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">:dataset</span> #&lt;WrappedValue<span class="at">@6bab96b0:</span> datasets/iris [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> datasets/iris</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-point {:=x <span class="at">:sepal-width</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:sepal-length</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:species</span>})</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/debug :=traces))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> <span class="st">"setosa"</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> [<span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.3</span>],</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">:y</span> [<span class="fl">5.0</span> <span class="fl">4.6</span> <span class="fl">4.5</span>],</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#1B9E77"</span>}}</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a> {<span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> <span class="st">"versicolor"</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> [<span class="fl">2.9</span> <span class="fl">3.0</span> <span class="fl">2.7</span> <span class="fl">2.0</span> <span class="fl">2.5</span>],</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">:y</span> [<span class="fl">5.7</span> <span class="fl">6.1</span> <span class="fl">5.6</span> <span class="fl">5.0</span> <span class="fl">6.3</span>],</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#D95F02"</span>}}</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a> {<span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> <span class="st">"virginica"</span>,</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> [<span class="fl">2.8</span> <span class="fl">3.3</span>],</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">:y</span> [<span class="fl">6.2</span> <span class="fl">6.7</span>],</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#7570B3"</span>}}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="coordinates-wip" class="level3" data-number="4.16.1">
<h3 data-number="4.16.1" class="anchored" data-anchor-id="coordinates-wip"><span class="header-section-number">4.16.1</span> Coordinates (WIP)</h3>
<section id="geo" class="level4" data-number="4.16.1.1">
<h4 data-number="4.16.1.1" class="anchored" data-anchor-id="geo"><span class="header-section-number">4.16.1.1</span> geo</h4>
</section>
<section id="polar" class="level4" data-number="4.16.1.2">
<h4 data-number="4.16.1.2" class="anchored" data-anchor-id="polar"><span class="header-section-number">4.16.1.2</span> polar</h4>
<p>Monthly rain amounts</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:month</span> [<span class="at">:Jan</span> <span class="at">:Feb</span> <span class="at">:Mar</span> <span class="at">:Apr</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">:May</span> <span class="at">:Jun</span> <span class="at">:Jul</span> <span class="at">:Aug</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">:Sep</span> <span class="at">:Oct</span> <span class="at">:Nov</span> <span class="at">:Dec</span>]</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">:rain</span> (<span class="kw">repeatedly</span> #(<span class="kw">rand-int</span> <span class="dv">200</span>))}</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    (ploclo/layer-bar</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>     {:=r <span class="at">:rain</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>      :=theta <span class="at">:month</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>      :=coordinates <span class="at">:polar</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.6</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"r":[130,81,137,10,135,108,43,16,41,16,42,35],"name":"","marker":{"size":20},"mode":null,"type":"barpolar","theta":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"opacity":0.6}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y"},"title":null}, {});</script></div>
<p>A polar random walk</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [n <span class="dv">600</span>]</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:r</span> (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> n #(<span class="kw">-</span> (<span class="kw">rand</span>) <span class="fl">0.5</span>))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>               (reductions <span class="kw">+</span>))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:theta</span> (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> n <span class="kw">rand</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                   (reductions <span class="kw">+</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>                   (<span class="kw">map</span> #(<span class="kw">rem</span> <span class="va">%</span> <span class="dv">360</span>)))</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">:color</span> (<span class="kw">range</span> n)}</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>      tc/dataset</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>      (ploclo/layer-line</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>       {:=r <span class="at">:r</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>        :=theta <span class="at">:theta</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>        :=coordinates <span class="at">:polar</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>        :=mark-size <span class="dv">3</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>        :=mark-opacity <span class="fl">0.6</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"r":[-0.0616563801214981,-0.23149613812505765,0.23810195689896396,0.02136479784399936,-0.2627266897046401,-0.15981841527923124,0.19487764132214236,0.03459154066049408,-0.3173078825154929,-0.15011642778059897,-0.46745752368176074,-0.6443756981290338,-1.0924683513666649,-0.6588495566822636,-0.9309657151893208,-0.8311189016363578,-0.6516222863224022,-0.29660952437857646,-0.5173833982856648,-0.9707273766937996,-0.64124892464797,-0.2076813254861546,-0.399643766127309,-0.37446813493832865,-0.600817044033447,-0.5803697009673559,-0.5031443445428111,-0.46429317285538263,-0.9578540934872609,-0.7014572141296138,-1.143980010465116,-0.9839841170766727,-1.3606612300605319,-1.0869544755035476,-1.23641011095216,-1.469577928117627,-1.2462685374597586,-0.778357238872819,-1.1407221145849196,-0.651439278263525,-0.8309870110234692,-0.9907129772592125,-1.3531081862322036,-1.64546719985896,-1.6034330595002368,-1.3996130835171525,-1.0330092335862162,-0.9623210401116855,-0.5217103079964125,-0.31621276168899626,-0.49436434233910687,-0.7104419550913916,-0.790762757186407,-0.5124047405997959,-0.3701638863758282,-0.4269107518975561,-0.15227492300362777,-0.5912857230285427,-0.09159149584097903,0.40488696438413985,0.2938004397214534,0.48111189802327126,0.8632899034682139,0.7196255228095044,1.1108121776126452,1.5212104288183614,1.3611720028912835,0.9562150218797607,0.5924330485400564,0.858508993717916,1.0212183768369982,1.24529047024297,1.2435655307458782,1.728421047132581,1.7017348770297258,2.1195205812086937,1.8275197758975215,1.8071679666779463,1.6557637691402747,1.4964533824344146,1.339443680835652,1.3009275242942118,1.7840498271726255,1.8145146767269136,2.018869772979733,2.3924876529503356,2.196785037395329,2.3776775945145276,2.4138655595255143,2.3101641082067506,2.6978913083075935,2.6697057674112883,2.176410735052116,2.0881299107254074,2.5823374784950586,3.0782613922832573,3.542463150176616,3.650967342390134,3.756275824634099,3.5393507418222634,3.920254359871853,3.5679426678171557,3.8983072640363723,4.079317844288588,4.272311799105922,4.761699930020887,4.285663373051802,4.324869709139095,4.479272822688273,4.680680142830753,4.569461717045511,4.425796092050903,4.014493543025072,4.3295322390303665,4.6673412870157485,4.399682968411361,4.609213751847749,4.34347876965855,4.2537477335018306,4.469365791856576,4.068617630393535,4.2271014529914295,3.7736330646447716,3.4878214336710185,3.4078829837172453,3.446299612192639,3.525381544935718,3.2993125889354915,2.999357119690087,3.024474348611599,3.183267006313429,3.404090603645657,3.0418501709290413,2.9058588497338897,2.8643877509848075,3.3311527509354444,3.6866254358133252,3.4476417254781295,3.559884269660214,3.405593551156769,3.6418619651427795,3.2122622122033326,3.1858033047533394,3.5094200661762898,3.9062997870315788,3.480026433350273,3.4288800788704736,3.575777961997936,3.9047190668705194,4.207800196136826,3.9839726436744405,4.370491849797027,4.515628833376824,4.026074739570006,4.4309118975438135,4.348048443373621,4.646577452390835,5.14394193086892,4.920438719974797,5.117135829724804,5.447649552735674,5.1480603071612885,5.6332584329687885,5.562170474576179,5.184294203729051,4.946123162468848,5.4202261477418965,5.318448578233066,5.134326491200139,5.4201320161043585,5.800242752394707,6.296125449470867,6.596992443865791,6.210040714784879,6.202912843211817,6.2455700474196565,6.305909948144148,6.264012045652346,5.86013969195399,5.800306418126228,6.2670112436047445,5.995945747717656,6.369774091228423,6.736099251131539,6.544852198447308,6.169557451630779,6.1228590254633675,5.868515125059799,5.952356699721649,6.149633402823783,6.235919737882002,6.136545142066694,6.07594529042418,6.117303684556187,5.909784081652112,5.956118062114137,6.318479209658761,6.649467848693739,6.2601221846963995,6.715198721614816,6.765403600467351,6.893057568763986,6.898042971441193,7.292351286187809,7.221242161463768,7.5820307401033915,7.67069022740947,7.737373988314696,7.2795559076316945,7.60281400088682,7.323046058815601,7.5560025295167845,7.330650704317182,7.526922316039899,7.468954538400696,7.24175315705671,7.181542441533875,7.271594310470021,6.780962648665013,6.9621740895273465,6.7537250580963795,6.828431365419721,7.325870787226141,7.64495274768968,7.21366627784405,7.604508911657196,7.80746496944996,7.46850077485745,7.833639145413667,8.142049018375353,7.747531358768951,8.166069856287063,7.925436140236707,7.804984341907255,8.139009978597505,8.086447860407201,8.098926086806424,7.7019147681461675,7.9391055863819755,7.621561879796135,7.248967993886467,7.430362728515163,7.571713877545611,7.377124693464913,7.451318748538635,6.964319671387811,6.783746264256064,6.553225321044063,6.916781388670546,7.247141744828165,7.5026682324452025,8.00066157349778,7.929831201710618,8.385256225697088,8.016970832355327,7.861895060442047,7.408199223808026,7.517161939397166,7.488232235883089,7.291895524762402,7.156138047915352,7.44094617857613,7.2768293162777775,7.077603370125814,6.896796357071159,6.538371437743038,6.94624342885057,6.656704322275522,6.766033681292373,6.639119766431367,6.149482691907537,5.67845559401366,5.298865294012696,5.251618149114517,5.506472510324101,5.121066012336309,4.9288714558119855,4.9558479360545284,4.827026684630722,4.3907957640046575,4.114535525626318,3.741488609519577,3.885688157563593,3.6329258323666287,3.8202959442649247,3.795664835498296,4.184424114288614,4.036755711497125,4.1058683324599805,4.399924397731136,4.750068382408492,4.537102082973875,4.911017631090938,4.537337877787511,4.517258010098399,4.949697959156888,4.69035021904918,4.73045184136301,4.240579822079328,4.001531792634526,4.366801742900648,4.043173443923456,4.065401005154199,3.8497931625392203,4.011824902892274,4.510872446884644,4.721831145210986,4.6099745214451024,4.681854998884783,4.314807468961505,4.604798282773268,4.999618564168554,5.148886495130451,4.963307884581972,5.145091531399293,5.610778697551524,6.067118608978683,6.4523851913078225,6.587357076264523,6.74461572064185,7.018819720990399,6.954725768536328,7.125573958339749,7.00997259713705,7.257146040316753,7.257137425246983,7.207002298537529,7.075528505433836,7.293253159710083,7.347150102294375,7.787554780571337,8.252868594595524,8.232882317876394,8.386545741531759,8.60399983596162,8.721558264927575,9.18847085863542,9.278127701206744,8.82634780910661,8.95954435660598,9.213059276995738,9.013842270990368,8.864030705890755,9.015783030319698,9.37100466749782,9.544751553427092,9.724544027799764,10.21681454139982,10.02506680317123,9.762894196007691,9.481759604835684,9.212194268869565,9.645806100153806,9.45726134599014,8.991280407268397,8.532515857527669,8.701506662178522,8.424571265082557,8.155414355277273,7.69660276659015,8.097703780097342,8.359800318062023,8.312062407667757,8.06343594733693,8.524152757484462,8.46610834223974,8.727184709988013,8.959200079221503,8.77660286147558,8.542374584727463,8.414322287995894,8.24436227740011,8.010998582400738,8.041158000245549,7.879178671278553,7.7122240581185695,8.044738781941618,8.000764157048318,8.256804145502917,8.393450245495893,8.403342654775022,8.155170059723527,7.930007995685191,7.771527770586678,7.324560254392971,7.579801948262609,7.4191007464956975,7.89644886387966,7.489238361904292,7.88010681317577,7.444023802450312,7.854166533883918,8.060880786406424,8.155051789160288,8.612304754253639,8.134648762762112,7.771593524350889,8.269138175066711,7.876325149492147,8.296062137269686,8.167237177813025,7.888254329061532,8.138273690395492,7.7253442436451,7.28889649619782,7.294801591220742,7.203858998664251,7.473158965772753,7.242776491700281,7.218763473327541,7.4168204961673645,7.0072505396141995,7.253812862359504,7.749336673415545,7.305210888201789,7.701195299827247,8.186931773983018,8.376040304971307,8.530441364785727,8.851822969457904,8.941950386487752,9.408994322759183,9.157527593377685,9.452636427926985,9.507871805617087,9.151428459335456,8.668331060126668,8.556968607771944,8.136285925222213,8.448030998433563,8.351617019217839,7.9935156134661804,8.063747791306236,8.166495003383382,8.01462204500147,8.0869455700788,8.280657036650036,8.738543828431485,9.222116759037768,9.72089399853894,9.972345905413892,10.089371873858791,9.62856034306951,9.342316774927097,9.505322419793822,9.78140039445645,9.364224700945675,8.916320141818963,9.099517266360692,9.346176274506472,9.579833509746138,9.849557240506893,10.14472205192498,10.611980479352612,10.44496495427422,10.816092088963222,10.65551247799519,10.68900967071899,10.844420437731578,10.569759899135782,10.36923596491042,10.587408957090599,10.462179048019593,10.333205274293071,10.643770425795092,10.918949642999653,11.393723678017686,11.7340256806802,11.658028437897329,11.220984703318978,11.472398191168462,11.531414226966938,11.778558026747522,11.704534400955733,11.215417201474441,11.365511455237915,11.469465344813472,11.924545140493047,11.493348076735765,11.901788822821464,12.223809229463095,12.349420882674805,12.085364813791836,12.377048354166721,12.356154403209121,12.413174960939159,12.248300909081996,12.641786034500665,12.515426221603272,12.575845958900997,12.127417264426493,11.687091733047195,11.365757195578496,11.538962783469952,11.662288944991973,11.865009699346142,11.399265030558766,10.984937385748662,11.029640471222873,10.6148949693517,10.238315524366824,9.773558162267355,9.571090223954055,9.672992614218943,9.352190299099494,9.11723249385246,9.210588886057437,8.766553893375995,8.547138780628538,8.880487841278367,8.84404351279768,8.975792861823251,8.501838817453553,8.87134551927645,8.700236390686072,8.221129612936847,8.707343742613146,8.621056106626881,8.816575955095592,8.450200599330092,8.519655507521557,8.303724976748914,8.402568953794205,8.883334624334521,8.995161046187413,8.545974249945152,8.384871262454585,7.944888527378815,7.479305166234294,7.905001517214831,8.161530641581965,7.93748719237402,8.260988606091592,8.331868683440538,7.946889289084037,7.574464234596782,7.0817498477519365,7.1535491814528225,7.176800318433102,7.593947476368982,7.127453532183449,7.329040594165523,7.580167506390285,7.603777930432267,7.599511101414922,7.45615118339281,7.6271612992640945,7.927442648439446,7.596042234020137,7.962904686983559,8.045866873375864,8.047172600941522,7.573313201307689,7.263402537911736,6.85210360138183,6.3747199082021435,6.265541245400912,6.243261837907379,6.581609094057789,6.6190543097676455,6.627952202710787,7.070985522702494,7.087888766860847,7.190103969421199,7.401802720475201,7.031436671025192,6.805084131592975,6.54716242335137,6.215956590190709,6.171401843994067,5.957892125753951,5.680749388969028,6.175963995363327,5.736619577316039,5.279737582769966,4.8358776530861345,4.821450016711043,4.882991258714599,5.031681006149946,5.129034553549502,5.535487472840632,5.558667024139014,5.750213913440376,6.046697122646273,5.868272782402155,6.213945852005621,6.594793163125546,6.370164544502086,6.831053872103564,6.727004033928027,7.167998607571698,7.002990466496211,7.193360755072797,7.509075843152311,7.125165847652036,6.637678483902238,6.3966308586616405,6.066322950452475,5.919618501570726,5.666232706994645],"name":"","mode":"lines","type":"scatterpolar","theta":[0.7405672270431483,1.2887713865130617,1.7346149169206067,2.5318541044813214,3.187499842082082,3.9939699029076587,4.233385112657982,4.686006404661195,5.076120624583078,5.845816924422519,5.930419436812396,6.264877331979102,7.208009400738064,7.979645044925331,8.586569420574532,9.096624691640523,9.275279134290836,9.513385006137309,10.451023877752077,10.48027115505806,10.486112624827925,11.354368666455391,12.284774119543158,12.704302543362576,13.02106489201018,13.418487969670647,13.684445468770953,13.839875353289765,14.39698264398889,14.870533723267888,14.917428715412736,15.562945771936258,16.303045419140634,16.90014662262287,17.5449119630663,17.729050850652207,17.935493043906696,18.760669408845995,19.548129693111683,20.34893609041145,20.69821233871767,21.132324342775732,21.891856305914974,21.928281270775113,21.960453654369715,22.167530597659493,23.147376705515818,23.989438736096222,24.257418914938164,24.437829621178395,24.85765316256556,25.448701864274486,25.90029447807789,26.333202266764232,26.514035738346053,27.10826803109531,27.98245031845071,28.835700994106283,29.260473057959576,29.913204506999104,30.393763560616126,31.300624065385172,31.82431681725907,32.50911784683777,33.38493441218214,33.97964014495038,34.04769147129471,34.53412890208249,34.62805811059946,34.90108750448844,34.957011118027495,35.400336326131914,35.47008946935843,36.009609285630944,36.56643950221644,36.7355242310149,37.470020894406446,37.58552429227528,38.10123661436812,38.57369180440581,39.00126530838855,39.730153328766264,39.764501293113454,40.60516343352841,40.780263439132746,40.7876617667349,41.368630989966505,42.25979597423695,42.81204872184969,43.24374894557332,43.89298252395165,44.52392906412106,44.95535750162651,45.51455359500591,46.2990658642625,46.73203491710718,47.38599462805309,48.177013278265505,48.36726602504986,48.40472437047792,48.62974046632615,48.63751559508605,48.74389164316253,49.63724168535602,49.668166543967544,50.66673100405952,50.69932618456545,51.21920057159064,51.59670135133851,52.02135636262473,52.2100488619794,52.866129359107646,53.69836841306604,54.217279819026935,54.65852061617973,55.482560794176,55.9533869406751,56.81267326868378,57.334557809476,57.826409016331624,58.777830029446115,59.218999389635236,59.402549431432206,59.501377023462915,59.55092248509494,60.177946360409656,60.20844950510387,61.07175639975453,61.403383071819626,61.7107133868702,62.31520349642966,62.97602878303917,62.98182341673272,63.02103109852291,63.224475402591196,63.580603385492395,64.3422679681785,64.89054570020505,65.684298022138,66.01242017822815,66.09355896096805,66.41118389198111,67.05596216423092,67.60289603592119,68.5344459090546,68.74577197216891,69.27728338376953,70.1304803462456,70.38645624668762,70.68099778163801,71.50491384043919,72.36885615477611,72.67339163942113,73.54074505854742,74.04553894899188,74.51165165670764,75.47794130186163,76.2145080643213,76.91277175963958,77.85386125330474,78.34377925251339,78.66819705587261,79.48815470286927,79.60821882999609,80.28496188596552,80.50368426372638,80.61595505154575,81.60665889721594,81.99433969474963,82.82431232160528,83.08824354552767,84.0750987728889,84.75952002362048,84.83163323923579,85.31706951940755,85.82884597064734,86.17565734748936,86.71570252620728,87.69250953543188,88.51989213492607,89.07559995306833,89.30208679173724,90.03458000278287,90.71129279390397,91.39665211535899,92.0217205431452,92.75177733893814,93.30559449674072,94.0536482285612,94.3908302300023,95.13273413086746,96.10811701787085,96.59874043235584,97.44612067232634,97.94005447036244,98.82592737700395,99.14261595057276,100.01675342301908,100.90148124475367,101.36057301451326,101.44951359304062,101.5027716284421,102.0760147040615,102.3119476020197,102.6814258492337,103.61015197992774,103.79809324831464,103.8416573278108,104.39640927101169,104.8475749020566,105.42511998228152,105.84742792679332,106.05575357210455,106.92351390212094,107.04289131943658,107.42004651596656,107.50614198822403,108.30892552439876,108.6872551787669,109.52848507199452,110.51771127705194,111.393558830057,111.67751322886575,112.38316524175166,112.47280139623929,112.5434606737687,112.91553963434335,113.7877544853067,113.79447677251093,114.60983665358087,115.51345890310907,115.71080774843688,116.20653211035597,116.23231305698684,116.59651874582502,117.472099809809,118.3383391903574,119.00418619813465,119.6188737561048,120.02825416298714,120.65917202022591,120.96104529240306,121.73441457502018,122.0642144089648,123.02156703567016,123.88908064381177,124.20440179658345,125.0055401523468,125.4842780651655,125.50186936171443,125.90291875103887,126.51552404304246,126.54796291068982,127.15193749220072,127.21721828401344,127.65443193195075,128.4559116160148,129.20211274005018,129.41895433032767,130.3414410407534,130.51812042294722,130.65230873592427,130.7386525317736,131.6649317995459,132.0656204345432,132.76537799780075,132.91239052344469,133.8563389088315,134.29090092825916,134.78368203895275,135.35542961935474,136.14730318539264,136.35497372353973,137.16597934861633,137.1866467535933,138.11673724865688,138.31096858226115,139.20293703443062,139.58051617631776,140.11436206356316,140.7356540442256,141.2083123315008,142.01492157046047,143.00224202630028,143.27735145553268,143.53935515347442,143.9240633969341,144.51785629141966,145.46080053437146,145.62131017276414,145.83290002941766,145.94485172987223,146.26552405963915,147.24570218758709,147.49529169081185,148.33748580192918,148.8181679041732,148.88731169412785,149.11266709785994,149.68462972226462,150.0128699755989,150.62718627318836,150.96051138675767,151.3340723752226,152.20456852701773,153.1863929104076,154.094768762484,154.44161581034393,155.3529754007323,155.60707547139023,156.54961290625835,156.89631411958464,157.83892185970876,158.55611903061262,159.53253531189256,159.84794301543897,159.97543475183662,160.83533294060183,161.74195355939452,162.50050691060267,163.2589722639147,164.16704989138012,164.4185038864455,164.9240916129036,165.26135114545093,166.1723049815816,166.37167528681687,166.90165248024087,167.37503086966686,168.2953061395751,168.6234665261321,168.89239198312288,169.018585422956,169.87773712378697,170.10530369634344,170.68422432732717,171.01038927794625,171.2745438178413,171.65854250420614,171.8494524939262,172.25177262277984,172.45424710685833,173.04749759985188,173.3351880696723,174.25115826251042,174.56649723991694,175.42209084154518,176.0382347203133,176.9929842184188,177.11254022915463,177.28989110608805,177.65812468389817,177.83453592425371,178.24550051983243,179.19952973535095,180.1167489262618,180.12516554040883,180.98190216319412,181.62421955434337,182.00355404388682,182.71075900307522,183.34864780664796,183.59037917806307,184.4765923687733,185.03672691795498,185.34575408500118,186.04717038442985,186.44680611707474,186.8202411979825,187.69950239606413,188.4430931061539,189.32080309653816,189.85191765381137,190.3383057992888,191.0906507429259,191.70103799039367,192.03365253661315,192.96951502481468,193.2844977951921,193.86675201292368,193.8878618533389,194.69459166370578,195.41741300400992,196.2092439370024,197.10894353407406,197.89756105816983,198.1369023127827,198.69604541466123,198.89538438034828,199.30242436916035,199.5282296556087,200.51535653262997,201.42556825026796,201.7442573542278,202.02219811178134,202.92966131330982,203.5470068184039,204.46105209563657,204.83305893127434,205.67078607830825,206.16240996418585,206.2139684864519,206.85851377748708,207.56279179650676,208.5417415397645,208.9075539822379,209.74489279591106,210.08899648825897,210.49216353801395,211.2336626620275,211.86124136394264,211.95011408136315,212.60256321767423,212.8282590443739,212.86122828671608,212.9169647665324,213.2711781234094,214.13402742075857,214.96650075866071,215.08846299478313,215.54868638430105,216.22872373107683,216.7043540344551,217.64862220229242,218.61001449979153,218.9345054530095,219.20135865339736,220.00012766810636,220.5310283039118,221.19205340530678,221.89789322813806,222.3616247212017,222.61622066068222,223.59016041372777,224.33136824084812,225.176244839058,225.42548575706203,225.71160264314008,226.06329412644035,226.61504971906885,227.5070794545842,228.21453305708167,228.52224614876275,228.69601154933545,229.2849047455499,229.9403397697408,230.12621011747402,230.7018679039282,231.19633270947676,231.44889798691412,232.15875330598197,232.2936901085865,232.65687218423162,232.85541061834945,233.12896023002,233.60628681799437,234.36513495544455,235.30458061832053,235.37009536620286,236.30162735407896,236.4807080613868,236.49268673740454,237.05151165917323,237.6723144026807,237.93374157033085,237.96124548094767,238.21741033113156,239.0537617632009,239.1832875444441,240.06233319687436,240.54967582884035,240.64613989000236,240.75668442660972,241.16031492381208,241.9051584856726,241.99034025530972,242.49957152113944,243.41268120494638,243.92545927930246,244.41117989274636,245.2704394257153,245.98892915944998,246.78448183325708,247.36081773435836,247.44997450995325,247.465940463564,248.05076071694904,248.3908871117715,248.72883973656167,249.00610745318758,249.32284926993,250.07816201441287,250.81294901942826,251.4055366984077,252.37185577609748,253.25066954865227,253.56773847722198,253.81902075552483,254.62055382941293,254.9340367631882,255.33741534329974,255.55110945665444,256.5283609128918,257.18651779197313,257.34667502251045,257.3735358525733,257.460878499463,258.0405850023382,258.8459151790653,259.0134551918103,259.52661775115814,259.7441880727034,260.62154868481787,261.3794412440666,262.2869968607213,263.02078597937447,263.28561870605995,263.37795083419115,263.81368909997695,264.7690384939773,265.0085535271915,265.44701480991256,265.90492514615806,266.12560801048267,266.6905634296369,266.82124329940933,267.0044086864859,267.742866593577,268.6058785561317,268.6678435353436,269.1180919955933,270.1124298120226,270.9247539590657,271.2222394042173,271.42017505719605,271.42034533245044,271.8459269273666,272.5290555055757,272.90534240747235,273.37545335304344,273.98200171958325,273.9846822539452,274.0044319679385,274.3339055939872,274.75705815223824,275.2063739492262,276.1604420515479,276.4750802408923,276.5246330891372,277.4448483482953,277.586026081732,278.39216263104146,278.5201072741698,279.4376540787743,280.41739885536174,280.86947519472034,281.2494456242902,281.89415144086087,282.86788375172864,283.4532342632352,284.11118486221596,284.3348124188377,284.39216766403047,285.30778830697136,285.5755402632604,286.40268744476737,286.92469783612046,287.41054817305525,287.7285116505379,288.64830890954545,289.57755484990633,290.00075949957665,290.0549094024643,290.78600627172267,291.3995665093585,291.98498647673796,292.6072919474076,293.1545920578575,293.5343890078255,294.3406774123133,294.8129091452506,295.2136453597411,295.9957751739603,296.07346471076863,296.73287953175463,296.9931670674135,297.9282742334669,298.59891544553005,299.2319946888016,300.1142099581962,300.26616259627457,301.160293142701,301.86873985631775,301.9361973548025,302.7674924269371,303.68551779167217,303.9983480056364,304.18803577576443,305.10876334743585,305.9539180397945],"line":{"width":3},"opacity":0.6}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y"},"title":null}, {});</script></div>
</section>
</section>
</section>
<section id="coming-soon" class="level2" data-number="4.17">
<h2 data-number="4.17" class="anchored" data-anchor-id="coming-soon"><span class="header-section-number">4.17</span> Coming soon</h2>
<section id="facets" class="level3" data-number="4.17.1">
<h3 data-number="4.17.1" class="anchored" data-anchor-id="facets"><span class="header-section-number">4.17.1</span> Facets</h3>
</section>
<section id="scales" class="level3" data-number="4.17.2">
<h3 data-number="4.17.2" class="anchored" data-anchor-id="scales"><span class="header-section-number">4.17.2</span> Scales</h3>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: <a href="https://github.com/scicloj/hanamicloth/blob/main/notebooks/hanamicloth_book/plotlycloth_walkthrough.clj">notebooks/hanamicloth_book/plotlycloth_walkthrough.clj</a></small></small></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./hanamicloth_book.walkthrough.html" class="pagination-link" aria-label="Walkthrough ðŸ‘£">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Walkthrough ðŸ‘£</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>